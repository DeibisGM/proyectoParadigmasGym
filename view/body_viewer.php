<?php
$viewerId = $viewerId ?? 'body-viewer-dashboard';
$viewerPeriodButtons = $viewerPeriodButtons ?? [
    ['key' => 'daily', 'label' => 'Diario'],
    ['key' => 'weekly', 'label' => 'Semanal'],
    ['key' => 'monthly', 'label' => 'Mensual'],
    ['key' => 'all', 'label' => 'Todas']
];
$viewerPeriodButtons = array_values(array_filter($viewerPeriodButtons, static function ($button) {
    return isset($button['key'], $button['label']) && $button['key'] !== '';
}));
$viewerDefaultPeriod = $viewerDefaultPeriod ?? null;
if (!$viewerDefaultPeriod && !empty($viewerPeriodButtons)) {
    $keys = array_map(static function ($btn) {
        return $btn['key'];
    }, $viewerPeriodButtons);
    if (in_array('weekly', $keys, true)) {
        $viewerDefaultPeriod = 'weekly';
    } elseif (in_array('monthly', $keys, true)) {
        $viewerDefaultPeriod = 'monthly';
    } elseif (in_array('daily', $keys, true)) {
        $viewerDefaultPeriod = 'daily';
    } else {
        $viewerDefaultPeriod = $keys[0];
    }
}
$viewerHasDelta = $viewerHasDelta ?? false;
if (!$viewerHasDelta) {
    foreach ($viewerPeriodButtons as $button) {
        $key = $button['key'] ?? '';
        if ($key === 'diferencia' || $key === 'delta' || $key === 'diff') {
            $viewerHasDelta = true;
            break;
        }
    }
}
?>
<div class="body-viewer-grid">
    <div id="<?php echo htmlspecialchars($viewerId, ENT_QUOTES, 'UTF-8'); ?>" class="body-viewer-container" data-viewer-id="<?php echo htmlspecialchars($viewerId, ENT_QUOTES, 'UTF-8'); ?>" data-default-period="<?php echo htmlspecialchars($viewerDefaultPeriod ?? '', ENT_QUOTES, 'UTF-8'); ?>">
<?php if (!empty($viewerPeriodButtons)): ?>
    <div class="filter-buttons">
        <?php foreach ($viewerPeriodButtons as $button):
            $key = $button['key'];
            $label = $button['label'];
            $isActive = ($viewerDefaultPeriod !== null && $key === $viewerDefaultPeriod);
        ?>
        <button class="btn-filter<?php echo $isActive ? ' active' : ''; ?>" data-period="<?php echo htmlspecialchars($key, ENT_QUOTES, 'UTF-8'); ?>" data-label="<?php echo htmlspecialchars($label, ENT_QUOTES, 'UTF-8'); ?>">
            <?php echo htmlspecialchars($label, ENT_QUOTES, 'UTF-8'); ?>
        </button>
        <?php endforeach; ?>
    </div>
<?php endif; ?>
<div class="body-views-wrapper">
        <div class="body-view">
            <div class="body-container">
                <svg viewBox="0 0 563.72511 1133.0802">
                            <g id="body_front" data-name="body"><path d="M563.52225,632.44019c-.67994,3.41-3.07984,5.41-6.26978,6.5-2.94019,1-5.6001-.02-8.1001-1.40991-3.33008-1.87012-6.54-3.96009-9.8601-5.87012-4.03-2.32-5.66993-1.30994-5.80982,3.39-.15015,4.59,1.61987,8.80994,2.68994,13.12,3.43994,13.8501,7.31006,27.59009,10.95,41.39a31.24236,31.24236,0,0,1,.5,4.95008c.41993,4.59-1.77,7.35986-6.13989,8.26-4.69018.96-6.66016-2.26-7.7102-5.95008-2.91993-10.21008-5.65992-20.48-8.34986-30.76-.48-1.85-.57007-4.03991-3.14013-3.4-2.42994.61011-1.93995,2.87012-1.51,4.61011,2.76,11.11987,5.7102,22.18994,8.37011,33.33.98,4.1,1.53,8.44995-3.22,10.96-4.54,2.39-8.68994.6-10.3-4.99-2.99-10.36-5.43994-20.88-8.38012-31.25-.73-2.58-.00977-7.62-3.68994-6.96008-4.3899.78-1.26,5.01-.78,7.51,1.95,10.08008,4.28,20.09009,6.48022,30.12012.81982,3.71-.06006,6.71-3.81006,8.1499a7.66157,7.66157,0,0,1-9.67016-4.01,64.25661,64.25661,0,0,1-2.80982-11.08c-1.72021-8.44995-3.94018-16.79992-5.97021-25.19006-.2-.79993-.48975-1.58984-.75-2.37988a2.60382,2.60382,0,0,0-3.02979-1.99c-1.89014.24-1.66015,1.71-1.74023,3.04-.23,4.09985,1.89013,7.67993,2.6101,11.58984,1.07007,5.88013,2.81006,11.62012,4.05,17.47009.74,3.53992,1.87989,7.45-2.87011,9.37-4.10987,1.65991-8.42994-.13-10.52979-4.96-3.39014-7.78-5.02-16.15-7.32007-24.29q-8.76013-30.975-17.37011-61.98L390.85232,423.61011l-.13989-.8999c-1.01,2.42993-1.93017,4.72-2.75,7.04-2.32007,6.51-4.3,13.13989-6.53,19.67993-3.3,9.67993-3.76,19.86-4.7102,29.84009-1.96973,20.65991-2.89991,41.38989-3.52979,62.15991-.43017,14.14-.61011,28.28-.63013,42.41-.09008,61.43006-.34985,122.86.3501,184.2699.12989,12.2301.30982,24.56006.11988,36.74011-.24,15.49.1101,31,.16015,46.46.1499,55.08.06006,110.15.16992,165.23.03,18.5.07007,36.99011-.07006,55.49011-.03,3.58984,1.33007,5.5,4.37011,7.46,16.32984,10.54993,32.57007,21.25,48.57984,32.28,9.57006,6.59985,9.37011,16.31994.1101,20.43994a12.81007,12.81007,0,0,1-5.3601.87q-51.73462-.03-103.48-.04992c-14.6399-.02-25.1399-10.49011-25.1399-25.11011q-.03-222.43506-.06006-444.88989c-.01-11.39014,3.11011-13.01-12.77-12.82007-7.64991.09-8,.42993-8,8.43994q-.045,223.43994-.05,446.89c0,5.26-.61988,10.28-3.1399,14.95007-3.99,7.36987-10.42993,11.55993-18.53,11.62988-36.31982.29-72.6499.15015-108.97.15015-4.76,0-7.77-2.76-9.65991-6.7201-1.92016-4.01989-.3-7.53991,2.63989-10.35,6.78-6.49,15.09009-10.87,22.78-16.07007,10.74-7.27,21.60987-14.33,32.51-21.34,1.89991-1.22,2.1399-2.66,2.1399-4.58-.00977-43.93994.69018-87.9-.10987-131.83008-1.21-66.46-.96-132.92993-.3601-199.37988.60009-66.80005.8601-133.59009.25-200.38013-.26-27.51-1.76-55.13989-5.95-82.40991-1.48-9.59009-5.56-18.76-8.2-28.18994-.90991-3.27-1.73-6.57007-2.63012-9.88013h-.29L107.27225,642.19019l-.06983.23q-1.38024,5.04017-2.76,10.09009c-4.46,16.30993-8.70019,32.67993-13.12012,49-1.11987,4.11987-1.86987,8.5-7.33007,9.59985-6.09986,1.22009-10.29981-2.56994-9.12989-8.69995q3-15.62988,6.06006-31.25c.28-1.42993,1.09986-3.21-1.09009-3.65991-2.28-.48-2.04,1.51-2.32983,2.92993-2.58008,12.51-5.14014,25.02-7.82007,37.5-1.19018,5.51-3.4602,7.05005-8.79,6.42-5.01-.59-5.88012-3.86-5.63989-8.22009.51978-9.47,2.25-18.77,3.75977-28.09985a26.10874,26.10874,0,0,0-.17994-10.64014c-3.49,7.09009-3.79,13.54-5.22,19.66-1.55,6.62-2.64013,13.34-4.21,19.95008-1.08008,4.52-4.51,6.73-8.41015,5.97-4.64991-.9-7.27-4.29-6.46-9.07007,2.20019-12.90991,4.70019-25.77,7.90014-38.49.32007-1.26,1.97-2.96-.2102-3.85-2.36988-.96-2.6399,1.25-3.1399,2.77-3.48,10.59-5.69995,21.5-8.36987,32.28992-1.47021,5.95007-3.8501,7.76-8.46,6.49-4.92017-1.35986-7.25-5.72-6.03027-10.77991,4.38012-18.04992,8.74023-36.11,12.91015-54.21008.51-2.21,1.54-5.08-1.08007-6.88989-2.68995-1.87012-5.11988-.24-7.40992,1.1-2.28,1.35-4.34008,3.09-6.67016,4.33-4.21,2.24-9.86988,1.27-12.21973-1.87-2.76025-3.7-2.2102-8.88,1.29981-12.75989,2.53-2.78,5.91015-4.31006,9.09008-6.05,11.2-6.13,22.39991-12.26,33.77-18.06006,5.43994-2.77,7.95-7.29,9.32007-12.75,5.30982-21.25,11.34985-42.31006,16.50977-63.61,6.49023-26.77,14.1101-53.25,21-79.92,6.91015-26.76,14.31006-53.38989,20.9602-80.22,4.07984-16.42993,9.01978-32.62,20.47-46.02,8.67993-10.13989,19.97-15.90991,31.79981-20.80994,14.54-6.03,29.34008-11.42,44.02-17.09,8.2102-3.16,16.39013-6.42005,24.64013-9.45008,4.95-1.81994,7.58008-4.6,6.98-10.37-.56-5.28-.19995-10.65991-.06-15.98.08007-2.64-.73-4.08008-3.29-5.32007-18.8899-9.15991-31.77-24.19995-40.89991-42.71991-1.83007-3.71-3.79-7.41-4.69995-11.52-.8601-3.87-3.42016-5.94-6.98-7.67-19.39013-9.4-25.40014-37.07-11.84009-53.81a20.97653,20.97653,0,0,1,9.51-6.21c3.6001-1.28,4.31006-3.34,3.65015-6.91-5.53027-29.65,8.26978-73.38,39.29981-91.98,25.88012-15.51,53.15014-19.32,82.23-11.9,7.27,1.86,13.53,6.05,20.29,8.73,12.76,5.07,21.38013,14.35,29.61011,24.3,10.12988,12.23,14.62988,26.93,17.17993,42.35,1.67994,10.13.72,20.2-.09008,30.29-.17994,2.27.2,3.81,2.73022,5.12,18.87988,9.74,22.79981,28.59,14.34985,46.27-3.33007,6.96-8.96,11.47-16.05,14.11a8.738,8.738,0,0,0-6.04981,6.88c-5.02,20.62-16.90015,36.53-34.3,48.3999a53.49771,53.49771,0,0,1-10.12012,5.3501c-2.72,1.09-3.8601,2.49-3.68994,5.46.3,5.15-.38012,10.28-.67993,15.42-.42016,7.25,1.04981,8.86,7.54981,11.75,18.70019,8.29993,38.12011,14.73,57.1101,22.28992,10.6399,4.24,21.49,8.14014,31.11011,14.57007,12.22,8.16992,20.04981,19.74,24.87988,33.36,7.74,21.79,12.73,44.36,18.57007,66.68006,7.30982,27.92993,14.93994,55.78,21.85987,83.79993,5.9602,24.16,12.7102,48.11,18.90014,72.20007,1.8999,7.37988,4.57984,14.58,6.16992,22.03,2.39014,11.22,11.65992,15.03991,20.08008,19.90991a363.11,363.11,0,0,1,31.22,19.61C562.53226,624.97022,564.36233,628.21021,563.52225,632.44019Z" style="fill:#f7c59f"/></g><path d="M289.77062,698.54341l-.18079.31374.21051-.284Z" style="fill:#f7c59f;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/>
                            <g class="body-part" id="pectoralmayor" data-name="Pectoral"><path d="M285.75839,361.38726c0-8.16252-.19779-16.33107.05309-24.48586a29.26834,29.26834,0,0,1,10.8877-22.30859,15.59364,15.59364,0,0,1,8.41006-3.566c16.8636-1.92983,33.82353-2.17915,50.45474,1.28085,13.17136,2.74021,20.86339,12.48891,25.37893,24.56656,4.78715,12.80411,7.44072,25.90518,1.77611,39.2635-3.64379,8.59277-10.63614,14.02863-18.46047,18.20615-18.89483,10.08823-39.32606,13.9158-60.59371,13.35136-10.15642-.26955-17.58258-8.9455-17.90325-20.32175-.122-4.32774-.02309-8.66168-.02386-12.9928s-.00018-8.66226-.00018-12.99338Z" style="fill:#ca7475;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M278.76054,365.50281c-.48537,7.42253.90032,16.93989-.705,26.37791-1.71032,10.05536-7.77914,15.57836-18.02017,15.82283a139.49668,139.49668,0,0,1-44.66048-6.583,76.27554,76.27554,0,0,1-16.73454-7.33667c-13.67916-8.14189-20.94831-19.81271-19.802-35.86436,1.23648-17.31432,5.84117-33.09108,22.117-42.80308,4.75628-2.83815,9.93344-3.75992,15.24785-4.06414,13.94752-.79843,27.99427-2.00413,41.8104.51439,12.05422,2.19738,18.74459,10.70606,20.05363,22.93945a134.45725,134.45725,0,0,1,.69424,14.45646C278.75731,353.7943,278.76054,358.62594,278.76054,365.50281Z" style="fill:#ca7475;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="gemelosfrontal" data-name="Gemelos frontales" data-legend-name="Gemelos (Frontal)"><path d="M314.13688,871.5206c7.60915,16.56419,14.92572,31.83357,21.62118,47.37056,2.93118,6.80187.86166,14.19008-.15934,21.17863q-4.64508,31.79421-6.90585,63.82324c-1.45542,20.64849-.83747,41.24914.22592,61.84893.3808,7.37735,1.98311,14.6911,3.00969,22.03635.21667,1.55043,1.22388,3.3728-1.12972,4.2163-2.15456.77223-3.04533-.88353-3.85347-2.28567-4.83438-8.38624-8.12089-17.4534-11.46452-26.48786-6.47677-17.50038-11.81029-35.43894-14.42825-53.84007-4.48061-31.493-5.54973-63.134-.62134-94.82882C302.7175,899.8487,308.2008,886.406,314.13688,871.5206Z" style="fill:#7b4f9a;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M249.55914,872.35392c6.10247,14.05087,10.9057,27.6576,13.25637,41.95362,4.04567,24.60452,3.7449,49.31046,1.25332,74.08482-2.525,25.10585-7.2259,49.7197-15.10482,73.69644a164.96312,164.96312,0,0,1-11.08435,26.49261c-1.01469,1.89524-2.137,4.30443-4.7793,3.333-2.568-.9442-1.36239-3.46264-1.05634-5.26865,3.8821-22.90792,4.53151-45.98782,3.67445-69.136a654.85662,654.85662,0,0,0-6.3863-69.35137c-1.09253-7.56665-1.03724-15.209-2.5055-22.69458-.65453-3.3368.66272-6.28535,1.98012-9.11611C235.50906,901.94685,242.34623,887.60866,249.55914,872.35392Z" style="fill:#7b4f9a;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="tibialanterior" data-name="Tibial Anterior"><path d="M361.8304,989.42614c1.63612,14.66523.60877,29.31569-.19876,43.91635-.998,18.04438-1.83451,36.15137-4.65173,54.061-.29741,1.89072.37663,4.40622-2.1974,4.99964-2.67728.6171-3.73185-1.82663-4.79642-3.6047-6.90558-11.53482-10.78151-24.11637-13.36823-37.26765-5.00278-25.43478-2.09052-50.56883,1.66062-75.80064,3-20.1798,7.055-40.12991,11.51486-60.01246,1.84726-8.2355,3.92747-16.42028,6.02344-24.59695.40555-1.58211.33464-4.06417,3.10914-3.58847,2.35808.40424,1.79783,2.48023,1.838,4.03274.38336,14.80614.87908,29.61191,1.025,44.421C361.96439,953.79777,361.8304,971.61257,361.8304,989.42614Z" style="fill:#a3537a;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M230.05252,1019.66247c-.03237,22.04221-3.45979,40.7176-10.31923,58.76539a51.42127,51.42127,0,0,1-6.72623,12.19293c-.93153,1.26776-2.09131,2.3107-3.76117,1.88-1.62989-.42072-1.60258-1.95431-1.6333-3.28273-.30758-13.28005-2.8073-26.34371-3.92653-39.55773-2.627-31.01734-2.14911-62.04042-1.71666-93.07388.2827-20.28715,1.212-40.56533,1.85934-60.8473a36.16085,36.16085,0,0,1,.27117-4.48507c.24328-1.53774-.01769-3.70411,2.36145-3.71332,1.92611-.00745,2.08215,1.75694,2.41923,3.2361,1.95589,8.58261,4.23757,17.10237,5.8706,25.7451,4.68395,24.78943,9.77058,49.52064,12.919,74.56753C228.97422,1001.46272,230.49957,1011.867,230.05252,1019.66247Z" style="fill:#a3537a;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="Braquiorradialfrontal" data-name="Braquiorradial"><path d="M451.56632,511.38164c-.49056-16.64248,4.51631-31.5631,10.31905-46.285.48021-1.21827.728-3.32282,2.62736-3.1002,1.4232.16672,1.61885,1.99049,2.10309,3.17263,10.26083,25.0491,16.20375,51.17,19.34484,77.99227a499.29867,499.29867,0,0,1,2.98906,62.693c-.009.99943-.03576,1.99929-.016,2.99817.02783,1.40616-.21,2.97423-1.5475,3.41814-2.07288.68789-2.38851-1.70221-2.91059-2.69529-9.492-18.05585-18.443-36.39724-24.71588-55.84577C455.27836,539.83539,450.76428,525.83694,451.56632,511.38164Z" style="fill:#bec043;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M76.89481,611.762c-2.80977-4.02846-2.059-7.96393-2.0507-11.66139.03172-14.08218.2842-28.12177,1.43825-42.21634a325.60214,325.60214,0,0,1,20.08986-89.48376c.84763-2.23436,1.05437-5.99028,3.66542-5.86609,2.21437.10539,2.49877,3.86272,3.32326,6.11062,6.55657,17.87576,11.31789,36.03846,8.49664,55.36714-2.19316,15.02546-7.09305,29.23348-12.95334,43.15041C92.8235,581.603,85.33968,595.368,78.45183,609.41976A24.10788,24.10788,0,0,1,76.89481,611.762Z" style="fill:#bec043;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="hombrofrontal" data-name="Hombros"><path d="M197.43952,299.60079c2.12945,0,6.121-.01519,10.11228.00845,1.34536.008,2.87547.04751,3.10761,1.76128.24817,1.83226-1.53136,1.47876-2.47086,1.69885-13.37731,3.13389-22.82512,11.35007-28.85113,23.3017-10.76652,21.35374-30.021,30.19825-51.50309,36.04375-2.41416.65691-3.5634-.10332-3.047-2.67683,2.41694-12.04552,5.07968-24.013,11.70305-34.63712,9.18646-14.7355,22.95408-22.06683,39.72068-24.51127A100.91214,100.91214,0,0,1,197.43952,299.60079Z" style="fill:#cc5116;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M351.80766,300.75327a11.90677,11.90677,0,0,1,3.08448-1.09209c14.3-.41,28.5974-.86209,42.56372,3.2812,19.79182,5.87155,31.43056,19.60018,37.32308,38.75187,1.79957,5.84889,2.78878,11.94319,4.45436,17.83884.84775,3.00076-.18439,3.81717-2.78334,3.12162-21.50794-5.75576-40.61032-15.0489-51.3111-36.09928-5.46548-10.75155-14.30336-17.68169-24.90069-22.61146C357.72663,302.77559,354.19782,304.25279,351.80766,300.75327Z" style="fill:#cc5116;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="abductores" data-name="Abductores"><path d="M300.23864,759.22362c-1.53978-.6614-1.56313-1.88632-1.64536-3.04045-1.4087-19.77172-2.50925-39.60411.73616-59.24792,4.7891-28.98706,21.2094-50.76588,44.03963-68.26511A39.3731,39.3731,0,0,1,347.77,625.423c1.16542-.65762,2.30408-2.70877,3.74494-1.36943,1.19624,1.1119.0191,2.77151-.56272,4.1407-6.81356,16.03447-13.84924,31.97985-20.35794,48.13735-10.42655,25.88333-20.48218,51.91452-28.03845,78.82772C302.1257,756.69115,301.69738,758.34149,300.23864,759.22362Z" style="fill:#243084;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M265.85156,727.27776a251.06454,251.06454,0,0,1-.96494,27.40288c-.11666,1.29828.71269,3.477-1.3857,3.621-1.72188.11814-2.12237-1.96554-2.5097-3.31953-1.18489-4.14185-1.98055-8.39886-3.2433-12.51411a886.75517,886.75517,0,0,0-42.58663-110.96123c-.694-1.50656-1.51092-2.96808-2.063-4.52425-.35743-1.00754-1.38667-2.32748-.26712-3.17428,1.12911-.85407,2.44783-.30581,3.54822.7065,8.42617,7.75235,17.69878,14.59328,25.06084,23.48969,15.683,18.95171,24.22748,40.56045,24.413,65.29648C265.88815,717.96,265.85825,722.61957,265.85156,727.27776Z" style="fill:#243084;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="abdominales" data-name="Abdominales"><path d="M284.78441,600.424c0-4.98774-.03039-9.97566.00906-14.9631.03537-4.47029-1.34578-9.55092,4.77989-11.53757a1.7988,1.7988,0,0,0,.98346-1.08968c1.94055-7.161,7.61767-6.55593,13.13435-6.44505,4.16138.08367,8.33173-.15519,12.48854.0022,6.50357.24612,10.78547,4.6729,10.79667,11.19594a112.03514,112.03514,0,0,1-5.31157,33.87686c-3.97574,12.65148-13.83374,19.3175-27.18333,19.0817-5.85421-.10332-9.48125-3.74464-9.51814-9.666-.04247-6.81828-.00989-13.637-.00989-20.45552Z" style="fill:#36b723;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M278.98856,601.44277c0,6.824.07864,13.64933-.025,20.47176-.08232,5.4206-2.80327,8.2712-8.21675,8.64541-12.87365.88983-24.20308-5.715-28.17174-18.83241a121.28806,121.28806,0,0,1-4.94133-34.8667c-.02181-6.07974,3.66911-10.13079,9.79118-10.41541,6.96428-.32369,13.95881.03454,20.94.01794a3.26236,3.26236,0,0,1,3.37042,2.33492,13.55149,13.55149,0,0,0,5.516,6.85454c1.88779,1.12294,1.84376,2.93085,1.83057,4.81766-.04876,6.9905-.01943,13.98143-.01943,20.97223Z" style="fill:#36b723;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M251.02389,467.61981c-4.15512,0-8.31413.11442-12.46449-.02624-6.51239-.2208-10.02161-4.01675-9.94847-10.52008.17557-15.61425,10.29168-27.34274,26.17212-30.53243a56.17782,56.17782,0,0,1,14.8476-1.02842c6.2212.41239,9.32975,3.73265,9.38882,9.83576.0563,5.81566-.131,11.64135.16722,17.44324.12309,2.39528-1.105,3.14377-2.72763,4.12623-3.14569,1.90451-6.18736,4.00278-7.16677,7.87856-.60111,2.37874-2.53726,2.42469-4.3131,2.464-4.64968.103-9.30321.03479-13.95518.03479Z" style="fill:#36b723;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M314.02084,467.6657c-4.53263-.24264-10.34813-.53069-16.15929-.88848-.94783-.0584-2.53842-.193-2.71177-.68606-1.70644-4.85446-5.41-7.86025-9.34724-10.71506a1.86358,1.86358,0,0,1-.79013-1.2309c.14014-7.60753-1.40434-15.30826.78037-22.79692,1.085-3.71909,4.07722-5.592,7.90467-5.84055,10.40061-.67556,20.08945,1.424,28.95641,7.18124,8.96052,5.818,12.20248,14.61122,12.9066,24.56772.41269,5.83564-4.44552,10.36232-10.25992,10.40468C321.97037,467.68559,318.63989,467.6657,314.02084,467.6657Z" style="fill:#36b723;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M307.29068,473.36891a90.603,90.603,0,0,1,15.89728,1.16255c8.20212,1.53341,12.04631,6.24232,11.73154,14.45042a43.39867,43.39867,0,0,1-2.34921,12.18c-2.9623,8.80219-10.36049,10.91413-18.447,11.37622-5.97365.34138-11.98086.1085-17.97306.097-.814-.00159-2.04295.09837-2.3774-.36055-3.45015-4.73442-11.1026-6.98513-9.02582-15.04414a10.36661,10.36661,0,0,0,.04165-2.49023c.033-12.59974.05184-12.57734,9.284-20.4357,1.17842-1.00308,2.42262-.92119,3.72968-.92918C300.965,473.35585,304.12791,473.36891,307.29068,473.36891Z" style="fill:#36b723;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M259.00176,512.73087a67.41352,67.41352,0,0,1-14.87341-1.04331c-6.101-1.32042-10.58952-4.53083-12.62289-10.68015a47.3983,47.3983,0,0,1-2.25714-15.18016c.02969-5.89154,3.75629-9.8815,10.10738-11.162,9.36015-1.88724,18.86941-1.0815,28.32354-1.23859,1.72939-.02874,2.62452,1.01048,3.5693,2.26884,1.08441,1.44437,2.19811,3.25813,3.72517,3.904,4.25194,1.79839,4.55314,5.31881,4.45385,8.97325-.126,4.63983-.82969,9.269-.00016,13.90813.15422.8623.09527,1.86216-.6675,2.25456-5.6427,2.90277-9.08779,10.55608-17.27467,8.0266A8.77927,8.77927,0,0,0,259.00176,512.73087Z" style="fill:#36b723;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M256.43692,518.53911c2.17287,0,3.84523.09746,5.50268-.01837,4.8182-.33674,9.40631-.33986,10.84363,5.71517a1.37807,1.37807,0,0,0,.49181.847c7.42784,3.98587,6.12246,10.85218,5.783,17.40829-.06023,1.16353-.04726,2.33115-.05315,3.497-.04727,9.358-5.45749,14.593-14.89587,14.66981a60.58082,60.58082,0,0,1-15.78206-1.87363c-8.40713-2.17528-14.59825-6.44206-15.17156-15.98443a115.95814,115.95814,0,0,1-.42138-13.4527c.32054-5.65995,4.5643-8.12046,9.33479-9.77507C246.92311,517.88863,251.9781,518.79639,256.43692,518.53911Z" style="fill:#36b723;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M307.12851,518.63174c5.08528.0534,10.27816-.62326,15.24637,1.21516,7.1658,2.65171,9.43,6.49222,8.63991,14.52554-.32475,3.30189-.47322,6.62861-.96244,9.90518a17.26362,17.26362,0,0,1-13.635,14.36467c-4.02544.8385-8.14047,1.293-12.134,2.09656-7.95459,1.601-13.32121-2.15582-18.4854-7.16669-1.15319-1.11891-1.02674-2.36031-1.0344-3.65687-.02063-3.49388.05892-6.98922-.00686-10.48194-.09838-5.22275-.98961-10.72183,5.3228-13.38447a.66183.66183,0,0,0,.33287-.36207C293.22657,516.87718,300.38919,518.2518,307.12851,518.63174Z" style="fill:#36b723;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="flexordedos" data-name="Flexores de los Dedos"><path d="M425.32688,501.90267c-.19677-1.04318-.18121-2.12878,1.06327-2.40853,1.51165-.33991,2.43854.71023,3.31186,1.76873a141.74426,141.74426,0,0,1,14.04538,20.55738c6.29354,11.13376,9.18366,23.45118,12.61559,35.56539,5.05432,17.841,10.29446,35.61012,17.08613,52.88678.50115,1.2749,2.03144,3.00811.3138,3.98941-1.85874,1.06186-3.09025-.51884-4.30522-2.12139a217.19383,217.19383,0,0,1-33.16317-61.82653C430.99921,534.636,427.75359,518.32075,425.32688,501.90267Z" style="fill:#97c666;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M138.47177,502.16533c-6.27329,39.74715-18.94071,76.92254-43.57246,109.29729a18.74967,18.74967,0,0,1-1.14154,1.633c-.98628,1.04-1.82728,2.72489-3.61749,1.9086-2.22595-1.01487-.43156-2.77426-.10519-3.7962,3.8512-12.05819,8.05168-24.005,11.89547-36.06544,3.86415-12.1244,7.33523-24.37366,11.15241-36.51356,4.35309-13.84436,11.895-25.89882,21.30465-36.83833.94662-1.10055,2.01759-2.49574,3.70141-2.07362C139.404,500.04662,138.69256,501.35783,138.47177,502.16533Z" style="fill:#97c666;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="serratoanterior" data-name="Serrato Anterior"><path d="M185.797,404.66075c-.41613-4.11152.82074-4.65557,3.32054-3.17678,17.56753,10.39207,37.01568,13.67837,56.96523,15.048,1.34209.09215,3.09207-.04784,3.326,1.46488.286,1.849-1.55626,2.25-2.998,2.64088-13.27406,3.59915-20.61366,12.7018-23.307,25.74513-.74294,3.598-2.3749,3.91075-5.15157,2.92133-15.05932-5.366-26.3925-14.18373-29.17665-31.12942C187.97188,413.283,186.65052,408.4763,185.797,404.66075Z" style="fill:#45ba75;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M378.65427,403.28254c-2.21287,9.15617-2.87049,18.76753-7.68937,27.175-5.69442,9.9349-14.74446,15.46217-25.26526,19.024-2.93018.992-4.23178-.20785-4.77113-3.06925-2.4675-13.09081-9.83676-21.83426-22.86788-25.47244-1.392-.38861-3.40005-.4519-3.11109-2.4722.31483-2.20122,2.44529-1.804,4.03417-1.89917,15.80956-.94716,31.227-3.50019,45.93337-9.83295,3.80334-1.63777,6.67118-4.68551,10.63071-5.887C377.84461,400.15161,379.18911,400.46529,378.65427,403.28254Z" style="fill:#45ba75;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="cuadriceps" data-name="Cuádriceps"><path d="M364.17735,625.0359c2.46571,4.4855,2.03092,8.3841,2.12066,12.10707.45724,18.96972.86386,37.94169.42374,56.91995C365.6136,741.847,357.9372,788.204,336.857,831.64615c-3.19594,6.5862-6.8642,12.91542-12.18023,18.051-6.53735,6.31549-12.63735,5.22086-16.63585-2.99206-3.46693-7.12115-4.64666-14.84012-5.41425-22.6424-3.02236-30.72136,2.90921-60.15123,13.06752-88.9034,12.61886-35.71661,26.9838-70.69817,44.95994-104.10945C361.57946,629.3299,362.62625,627.67535,364.17735,625.0359Z" style="fill:#4b8ebb;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M261.90393,808.3089a102.92812,102.92812,0,0,1-3.06071,30.16212,43.585,43.585,0,0,1-2.65141,7.5008c-4.406,9.533-10.15285,10.40157-17.4753,2.698-7.84486-8.25314-12.17153-18.59142-16.63588-28.77787-7.55859-17.24664-12.03243-35.45773-16.41841-53.70508a267.44142,267.44142,0,0,1-6.85737-41.72081c-2.03219-25.91951-.96394-51.83585-.80862-77.75616.0356-5.93694.475-11.87321.81017-17.80515.06623-1.17183-.70969-2.88588,1.28511-3.2571,1.89033-.35169,2.03472,1.49893,2.57252,2.51831,7.67109,14.54245,14.81928,29.335,21.29993,44.45344,11.90824,27.78027,23.7964,55.56591,31.46124,84.9107,1.34019,5.131,2.46042,10.33651,3.35391,15.56372C260.76988,784.74048,262.43534,796.43318,261.90393,808.3089Z" style="fill:#4a8ebb;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M367.9611,783.60064a183.23873,183.23873,0,0,1-13.312,72.9615c-1.03025,2.56024-1.58391,6.39483-4.54185,6.62276-2.84184.21884-3.19076-3.70588-4.53749-5.87116-.787-1.26538-1.15065-2.86079-2.1174-3.937-6.55684-7.29972-4.98157-14.13552-.73262-22.332,10.60469-20.4565,16.00411-42.77491,20.93454-65.16167.476-2.16119.43323-5.91071,2.65251-5.715,2.78664.24581,1.52593,3.84471,1.59214,5.97563C368.07955,771.95774,367.9611,777.78105,367.9611,783.60064Z" style="fill:#4a8ebb;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M196.73905,784.69105c0-6.49478-.06788-12.99078.04285-19.48368.03177-1.8624-.87792-4.99317,1.2418-5.26608,2.971-.38245,2.22926,3.298,2.58852,4.942a368.00029,368.00029,0,0,0,19.27009,62.69085c2.15688,5.19931,6.50516,10.30947,6.40108,15.3901-.099,4.83383-4.635,9.61353-7.3533,14.3405-1.25189,2.17693-1.45331,5.99669-4.57963,5.76674-2.89273-.21267-3.32724-3.83208-4.32715-6.20918a187.063,187.063,0,0,1-13.046-49.72251c-.91456-7.376-.15322-14.95974-.15322-22.44913Z" style="fill:#4a8ebb;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="oblicuosfrontales" data-name="Oblicuos"><path d="M334.676,610.29317c1.52886-17.89712,2.99356-34.94719,4.43753-51.99891.50493-5.96245,1.03287-11.92478,1.39121-17.8967a5.18669,5.18669,0,0,1,2.07267-4.23858c6.96786-5.38868,13.857-10.879,20.81234-16.28413,1.002-.77863,2.07687-1.97768,3.5329-1.24762,1.311.65731.82651,2.01985.71126,3.12845-1.56685,15.07386-1.87644,30.20692-2.00285,45.34028-.06515,7.79806-1.55129,15.5916-.09984,23.411a4.02778,4.02778,0,0,1-.89953,2.72165c-5.90569,7.86471-12.22981,15.35373-20.09451,21.37568-2.28336,1.74847-4.754,3.39465-7.75961,1.9504C333.61729,615.03607,334.94034,611.94222,334.676,610.29317Z" style="fill:#5b7f97;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M195.46833,517.57349a10.87018,10.87018,0,0,1,5.89779,2.77993c6.53738,5.385,13.07835,10.767,19.70266,16.04393a6.60088,6.60088,0,0,1,2.76254,5.44782c.77848,22.07754,2.59313,44.08258,4.917,66.048a31.55718,31.55718,0,0,1,.175,3.9885c-.09367,4.35019-3.44441,6.67011-7.01054,4.19354-9.2344-6.41283-16.50044-14.89359-23.01006-23.98742-.64963-.90752-.27531-2.59252-.27155-3.91636.04284-15.13764.65691-30.33318-1.0841-45.37006C196.57971,534.44616,197.9917,526.06023,195.46833,517.57349Z" style="fill:#5b7f97;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M223.60638,526.79078c-7.55066-4.1656-12.83941-10.20024-19.51376-13.91839-8.37447-4.66528-8.89806-12.10591-9.27384-19.94968-.16486-3.44115.49378-6.90726-.88958-10.27829a3.1469,3.1469,0,0,1,.37995-2.77938c.73366-.77064,1.81886.00647,2.70412.48638,7.57073,4.10444,15.12838,8.23415,22.7476,12.24681a3.59132,3.59132,0,0,1,2.25608,3.41247C222.465,505.929,223.02785,515.84211,223.60638,526.79078Z" style="fill:#5b7f97;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M368.75423,479.10331c.78528,9.39768-1.50906,17.74657-.961,26.17289a1.72507,1.72507,0,0,1-.57716,1.28284c-8.53885,6.4315-16.555,13.59909-26.38415,19.32788-.64011-10.74893.631-20.72484,1.18027-30.72143a3.12177,3.12177,0,0,1,2.2397-2.95056C352.63789,489.02667,360.22508,484.28548,368.75423,479.10331Z" style="fill:#5b7f97;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M193.03715,461.37822c-.65809-4.74607-1.42059-9.77067-2.00607-14.81572-.13876-1.19581-.73488-2.91577.80118-3.55447,1.17888-.49011,1.96107.9265,2.84781,1.60383a72.952,72.952,0,0,0,23.722,12.28264c2.62382.77393,3.73591,1.6958,3.01427,4.84652-1.27264,5.55669.01324,11.21993.29894,16.84265.236,4.64434-1.479,5.70352-5.64371,3.74048-5.96724-2.81258-11.52612-6.37657-17.582-9.098C194.1086,471.2574,192.39183,466.69654,193.03715,461.37822Z" style="fill:#5b7f97;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M372.772,442.78552c-.74,6.753-1.92315,13.25516-2.03537,19.77564-.11318,6.57509-3.15857,9.97651-8.978,12.34787-5.48349,2.23436-10.57039,5.44416-15.82424,8.239-3.03868,1.61646-4.72685,1.14668-3.98617-2.686,1.24182-6.42577.84515-12.89663.63656-19.35827-.06462-2.00234.11229-3.50432,2.434-4.11482,9.71416-2.55456,18.11546-7.62512,25.96283-13.73556C371.32148,442.98868,371.88149,443.00675,372.772,442.78552Z" style="fill:#5b7f97;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="trapeciofrontal" data-name="Trapecio"><path d="M307.04609,245.69911c-8.1626,13.49935-15.7961,26.61954-24.69306,39.22-3.88441-3.72477-5.82871-8.37235-8.51237-12.509-5.04812-7.78128-10.11013-15.55365-15.10854-23.36675-.56431-.88214-1.68216-1.9797-.5392-3.06776.84106-.80067,1.88336-.038,2.75351.364,13.98276,6.4607,27.89333,5.83829,41.76512-.365a6.91936,6.91936,0,0,1,1.9085-.50322A15.22968,15.22968,0,0,1,307.04609,245.69911Z" style="fill:#8e0000"/><path d="M282.35287,285.91929a1,1,0,0,1-.69238-.27832,37.98248,37.98248,0,0,1-6.43359-8.97168c-.74414-1.29395-1.44727-2.51563-2.22559-3.71387l-2.70508-4.16895c-4.08007-6.28417-8.29882-12.7832-12.40722-19.2041-.07617-.12011-.165-.24511-.25684-.374-.55957-.791-1.72558-2.43652-.12891-3.957,1.22168-1.16113,2.63184-.44336,3.47559-.01172.13184.06738.26074.13379.38672.19141,13.27539,6.13379,26.666,6.01269,40.9375-.36914a7.84363,7.84363,0,0,1,2.1875-.582,5.23511,5.23511,0,0,1,1.40137.07422c.31836.042.7207.09571,1.25683.15039a.99963.99963,0,0,1,.75293,1.5127q-1.9702,3.25781-3.90625,6.48535c-6.85937,11.41211-13.33886,22.19141-20.82617,32.79395a.99819.99819,0,0,1-.7207.418C282.41635,285.91733,282.38412,285.91929,282.35287,285.91929Zm-23.2832-39.29a.25477.25477,0,0,0-.1875.07129c-.25.23828-.34375.32715.38184,1.35156.11035.15527.21679.30664.30957.45215,4.10547,6.415,8.32226,12.91113,12.40039,19.19336l2.70508,4.16894c.80761,1.24317,1.55664,2.5459,2.28125,3.80567a40.40029,40.40029,0,0,0,5.26367,7.6914c7.15625-10.22851,13.42871-20.66406,20.05762-31.6914q1.54688-2.57373,3.10937-5.167a2.765,2.765,0,0,0-.64258-.042,5.89464,5.89464,0,0,0-1.62793.42383c-14.624,6.541-28.9541,6.66211-42.59375.36035-.14746-.06836-.30078-.14648-.458-.22656A2.83013,2.83013,0,0,0,259.06967,246.62925Z" style="fill:#442a0c"/><path d="M248.07782,247.85605c5.20258,4.67446,8.441,10.26343,11.65748,15.84044,6.54772,11.353,13.45339,22.543,17.84835,34.97966.6524,1.84626,2.63987,4.57609.43042,5.90558-2.23536,1.345-3.54-1.77947-4.97834-3.16013a172.16037,172.16037,0,0,1-19.91-22.32775c-3.629-4.95408-5.86868-10.111-5.15459-16.53193C248.5101,257.716,248.07782,252.762,248.07782,247.85605Z" style="fill:#8e0000"/><path d="M276.93588,305.9271c-1.59375,0-2.76758-1.52148-3.61133-2.61523a11.0097,11.0097,0,0,0-.98144-1.16895,173.05307,173.05307,0,0,1-20.02442-22.458c-4.35742-5.94922-6.00488-11.26367-5.34179-17.2334a73.65231,73.65231,0,0,0,.18261-10.02539c-.041-1.52441-.082-3.0498-.082-4.57031a1.00012,1.00012,0,0,1,1.668-.74414c5.35254,4.80859,8.65918,10.541,11.85645,16.085q1.207,2.09326,2.42383,4.17969c5.71,9.81836,11.61523,19.9707,15.5,30.9668.12695.35742.30859.75.49609,1.16015.75781,1.65332,2.02441,4.4209-.49219,5.93555A3.07824,3.07824,0,0,1,276.93588,305.9271ZM249.1058,250.2269c.01465.71485.03418,1.42969.05371,2.14551a75.21517,75.21517,0,0,1-.19433,10.29981c-.60449,5.43457.92773,10.3164,4.9668,15.83105a171.13234,171.13234,0,0,0,19.79589,22.19629,12.57979,12.57979,0,0,1,1.18067,1.39063c1.36816,1.77343,1.85156,2.07519,2.58984,1.63476.83692-.5039.65039-1.32519-.29492-3.38867-.21387-.46875-.41895-.918-.56348-1.32715-3.82226-10.81933-9.67968-20.88867-15.34277-30.62793q-1.21728-2.09033-2.42773-4.18457C256.10971,259.41147,253.266,254.48179,249.1058,250.2269Z" style="fill:#442a0c"/><path d="M315.95678,258.18033c2.10046,12.22728-4.29131,21.13248-11.77185,29.44979-4.6567,5.17759-9.76465,9.95259-14.73442,14.8429-1.1036,1.08594-2.29657,3.09092-4.08546,1.78743-1.50812-1.09893-.05935-2.822.42581-4.099,5.56-14.6342,13.31773-28.14438,21.39114-41.48949q3.0835-5.097,6.07031-10.25214c.41238-.70964.64822-1.73031,1.618-1.59626,1.37767.19046,1.06076,1.45572,1.07238,2.3799C315.98037,252.19535,315.95678,255.188,315.95678,258.18033Z" style="fill:#8e0000"/><path d="M286.49643,305.69272a2.897,2.897,0,0,1-1.7207-.624c-1.86524-1.35937-.84278-3.38183-.293-4.46777a8.68774,8.68774,0,0,0,.373-.79395c5.8086-15.28711,14.12793-29.51562,21.47071-41.65234,1.93261-3.19531,3.915-6.54395,6.06152-10.23633.07031-.123.13477-.25684.2002-.3916a2.33917,2.33917,0,0,1,2.41894-1.69336c2.05762.28418,1.97949,2.15039,1.94629,2.94727-.00586.1416-.0127.27929-.01074.41015.02734,2.15625.02246,4.31348.01758,6.46973l-.00391,2.43555c2.207,13.07226-5.0498,22.44335-12.02832,30.20312-3.60938,4.01465-7.542,7.83789-11.34473,11.53613q-1.71972,1.67286-3.43164,3.35059c-.1748.17187-.35254.37012-.53418.57226C288.95346,304.49644,287.87631,305.69272,286.49643,305.69272Zm28.2373-57.8789a2.37073,2.37073,0,0,0-.34765.58984c-.08692.17774-.17383.35547-.26856.51856-2.15234,3.70312-4.14062,7.06152-6.08008,10.26758-7.29687,12.06152-15.56347,26.19628-21.3125,41.32714a10.64315,10.64315,0,0,1-.458.98731c-.69825,1.38183-.69336,1.6709-.31348,1.94726.59375.4336.93066.35547,2.17676-1.03125.21094-.23339.417-.46093.61914-.66015q1.7124-1.68457,3.44043-3.3584c3.77832-3.67578,7.68652-7.47559,11.25195-11.44043,6.67969-7.42773,13.63086-16.37695,11.5293-28.61231a.97811.97811,0,0,1-.01465-.16894l.00391-2.52344c.00488-2.14746.00976-4.29394-.01758-6.44043-.002-.165.00488-.34082.01269-.51855a2.63661,2.63661,0,0,0-.043-.84473C314.91537,247.86167,314.85971,247.8314,314.73373,247.81382Z" style="fill:#442a0c"/><path d="M201.475,293.41218c.57274-2.8146,2.44616-2.68458,3.99436-3.121,10.1913-2.87284,20.39446-5.70611,30.55375-8.68862a7.87141,7.87141,0,0,1,8.85231,2.4647c4.56623,4.98664,9.72844,9.43241,14.83143,16.26644C239.648,296.03545,220.6903,294.448,201.475,293.41218Z" style="fill:#8e0000"/><path d="M259.70639,301.33335a.96615.96615,0,0,1-.21-.02246c-20.665-4.42774-40.125-5.93262-58.0752-6.89942a1.00056,1.00056,0,0,1-.92578-1.19824c.60938-2.99218,2.55664-3.40918,3.97949-3.71386.24415-.05274.48731-.1045.72266-.1709l6.46191-1.81739c7.90235-2.2207,16.07422-4.5166,24.082-6.86816a8.85173,8.85173,0,0,1,9.87109,2.748c1.44238,1.57519,2.92676,3.07812,4.499,4.66992a107.82659,107.82659,0,0,1,10.39649,11.67383,1.0004,1.0004,0,0,1-.80176,1.59863Zm-56.84473-8.84668c16.88672.93164,35.08985,2.38672,54.38965,6.3125a120.08478,120.08478,0,0,0-8.5625-9.333c-1.58594-1.60547-3.083-3.12109-4.55078-4.72363a6.86394,6.86394,0,0,0-7.834-2.17969c-8.01758,2.35352-16.19532,4.65137-24.10352,6.874l-6.46,1.81738c-.27539.07715-.56055.13867-.84668.20019C203.96225,291.65464,203.29428,291.79722,202.86166,292.48667Z" style="fill:#442a0c"/><path d="M304.71181,299.41338c5.3697-7.361,11.24729-12.65566,17.15-17.90481,1.50116-1.33495,3.31919-.82828,5.17451-.24584,10.10461,3.17211,20.25169,6.20912,30.38635,9.28539,1.36616.41467,3.46507.42126,3.12726,2.349-.282,1.60957-2.25181.83466-3.45958.90762-16.21855.98-32.45673,1.75069-48.316,5.76909C307.87608,299.80148,306.84785,299.51618,304.71181,299.41338Z" style="fill:#8e0000"/><path d="M307.99643,300.65952c-.42481,0-.88379-.04492-1.42383-.09765-.52148-.05176-1.1416-.11231-1.9082-.14942a.99945.99945,0,0,1-.75977-1.58789c5.56836-7.63574,11.79688-13.17578,17.292-18.06348,1.97852-1.76074,4.38379-1.00293,6.13965-.45214,7.81348,2.45312,15.78614,4.86523,23.49707,7.19824l6.87891,2.084c.23633.07129.49512.12891.75879.18848,1.22461.27441,3.50293.78613,3.06445,3.29-.37109,2.11328-2.4834,1.8916-3.50293,1.78711a6.071,6.071,0,0,0-.88183-.05371l-2.93848.17578c-14.9375.89062-30.38281,1.81152-45.19141,5.56445A4.11158,4.11158,0,0,1,307.99643,300.65952Zm-1.39258-2.10449c.05566.00586.11035.01074.16406.01562a5.67291,5.67291,0,0,0,1.76172.03321c14.99219-3.79883,30.53321-4.72559,45.56348-5.6211l2.93652-.17578a7.30852,7.30852,0,0,1,1.21.06055,3.46472,3.46472,0,0,0,1.28418-.00391.45855.45855,0,0,0,.041-.13965c.07812-.4414.11035-.625-1.53223-.99316-.31347-.07031-.62109-.14062-.90137-.22559l-6.877-2.084c-7.71582-2.334-15.69336-4.74805-23.51758-7.2041-1.86035-.585-3.1582-.89649-4.21.03808C317.46225,286.75913,311.76791,291.82456,306.60385,298.555Z" style="fill:#442a0c"/></g>
                            <g class="body-part" id="biceps" data-name="Bíceps"><path d="M169.9759,380.43081c-2.05063,35.65019-14.9737,72.85667-46.70487,101.93661-1.10327,1.01108-2.24511,1.9839-3.412,2.9209-2.14523,1.72241-3.35666,1.37431-4.05236-1.489-2.20886-9.09121-4.91939-18.07147-6.83079-27.221a105.3829,105.3829,0,0,1-2.02644-26.57161c1.28514-27.27057,14.23165-57.51282,46.61322-69.173C167.54913,355.79725,170.04476,357.951,169.9759,380.43081Z" style="fill:#dea943;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M456.876,434.2733c-.32848,16.93428-3.61688,32.66814-8.2253,48.18078-1.02979,3.46654-2.27357,4.32945-5.34273,1.478-24.6425-22.8948-40.80054-50.43835-46.76909-83.77365a158.93588,158.93588,0,0,1-2.78076-32.24157c.20478-7.85679,1.82277-9.34434,9.5327-8.4349,10.4729,1.2353,19.05713,6.62609,26.98246,13.05624C450.09448,388.61987,456.73606,410.41407,456.876,434.2733Z" style="fill:#dea943;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M411.44408,455.7848c3.65529,2.45447,5.30086,6.59669,7.81313,9.96126a167.38567,167.38567,0,0,0,15.98406,18.4328c1.1314,1.12808,3.76825,2.144,1.947,4.2893a4.71165,4.71165,0,0,1-5.90984,1.20039,32.95843,32.95843,0,0,1-11.9461-9.59975c-4.70287-6.19758-7.15082-13.41778-8.73381-20.959C410.357,457.95928,410.0713,456.80467,411.44408,455.7848Z" style="fill:#dea943;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M153.55847,459.42672c-2.62453,12.62244-7.22566,23.88185-19.75211,30.0712-2.42963,1.20044-4.06626.82647-5.69319-.94292-2.128-2.31442.47155-3.30116,1.53695-4.3167,8.01148-7.63664,14.37191-16.5676,20.57706-25.64074.59495-.86987,1.135-2.32669,2.61006-1.79723C154.06381,457.24064,153.50907,458.488,153.55847,459.42672Z" style="fill:#dea943;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                        </g>
                   </svg>
            </div>
        </div>

        <!-- VISTA TRASERA -->
        <div class="body-view">
            <div class="body-container">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 563.72511 1133.0802">
                    <g id="Layer_2_Back" data-name="Layer 2">
                        <g id="Layer_1-2_Back" data-name="Layer 1">
                            <g id="body_back" data-name="body"><path d="M563.52225,632.44019c-.67994,3.41-3.07984,5.41-6.26978,6.5-2.94019,1-5.6001-.02-8.1001-1.40991-3.33008-1.87012-6.54-3.96009-9.8601-5.87012-4.03-2.32-5.66993-1.30994-5.80982,3.39-.15015,4.59,1.61987,8.80994,2.68994,13.12,3.43994,13.8501,7.31006,27.59009,10.95,41.39a31.24236,31.24236,0,0,1,.5,4.95008c.41993,4.59-1.77,7.35986-6.13989,8.26-4.69018.96-6.66016-2.26-7.7102-5.95008-2.91993-10.21008-5.65992-20.48-8.34986-30.76-.48-1.85-.57007-4.03991-3.14013-3.4-2.42994.61011-1.93995,2.87012-1.51,4.61011,2.76,11.11987,5.7102,22.18994,8.37011,33.33.98,4.1,1.53,8.44995-3.22,10.96-4.54,2.39-8.68994.6-10.3-4.99-2.99-10.36-5.43994-20.88-8.38012-31.25-.73-2.58-.00977-7.62-3.68994-6.96008-4.3899.78-1.26,5.01-.78,7.51,1.95,10.08008,4.28,20.09009,6.48022,30.12012.81982,3.71-.06006,6.71-3.81006,8.1499a7.66157,7.66157,0,0,1-9.67016-4.01,64.25661,64.25661,0,0,1-2.80982-11.08c-1.72021-8.44995-3.94018-16.79992-5.97021-25.19006-.2-.79993-.48975-1.58984-.75-2.37988a2.60382,2.60382,0,0,0-3.02979-1.99c-1.89014.24-1.66015,1.71-1.74023,3.04-.23,4.09985,1.89013,7.67993,2.6101,11.58984,1.07007,5.88013,2.81006,11.62012,4.05,17.47009.74,3.53992,1.87989,7.45-2.87011,9.37-4.10987,1.65991-8.42994-.13-10.52979-4.96-3.39014-7.78-5.02-16.15-7.32007-24.29q-8.76013-30.975-17.37011-61.98L390.85232,423.61011l-.13989-.8999c-1.01,2.42993-1.93017,4.72-2.75,7.04-2.32007,6.51-4.3,13.13989-6.53,19.67993-3.3,9.67993-3.76,19.86-4.7102,29.84009-1.96973,20.65991-2.89991,41.38989-3.52979,62.15991-.43017,14.14-.61011,28.28-.63013,42.41-.09008,61.43006-.34985,122.86.3501,184.2699.12989,12.2301.30982,24.56006.11988,36.74011-.24,15.49.1101,31,.16015,46.46.1499,55.08.06006,110.15.16992,165.23.03,18.5.07007,36.99011-.07006,55.49011-.03,3.58984,1.33007,5.5,4.37011,7.46,16.32984,10.54993,32.57007,21.25,48.57984,32.28,9.57006,6.59985,9.37011,16.31994.1101,20.43994a12.81007,12.81007,0,0,1-5.3601.87q-51.73462-.03-103.48-.04992c-14.6399-.02-25.1399-10.49011-25.1399-25.11011q-.03-222.43506-.06006-444.88989c-.01-11.39014,3.11011-13.01-12.77-12.82007-7.64991.09-8,.42993-8,8.43994q-.045,223.43994-.05,446.89c0,5.26-.61988,10.28-3.1399,14.95007-3.99,7.36987-10.42993,11.55993-18.53,11.62988-36.31982.29-72.6499.15015-108.97.15015-4.76,0-7.77-2.76-9.65991-6.7201-1.92016-4.01989-.3-7.53991,2.63989-10.35,6.78-6.49,15.09009-10.87,22.78-16.07007,10.74-7.27,21.60987-14.33,32.51-21.34,1.89991-1.22,2.1399-2.66,2.1399-4.58-.00977-43.93994.69018-87.9-.10987-131.83008-1.21-66.46-.96-132.92993-.3601-199.37988.60009-66.80005.8601-133.59009.25-200.38013-.26-27.51-1.76-55.13989-5.95-82.40991-1.48-9.59009-5.56-18.76-8.2-28.18994-.90991-3.27-1.73-6.57007-2.63012-9.88013h-.29L107.27225,642.19019l-.06983.23q-1.38024,5.04017-2.76,10.09009c-4.46,16.30993-8.70019,32.67993-13.12012,49-1.11987,4.11987-1.86987,8.5-7.33007,9.59985-6.09986,1.22009-10.29981-2.56994-9.12989-8.69995q3-15.62988,6.06006-31.25c.28-1.42993,1.09986-3.21-1.09009-3.65991-2.28-.48-2.04,1.51-2.32983,2.92993-2.58008,12.51-5.14014,25.02-7.82007,37.5-1.19018,5.51-3.4602,7.05005-8.79,6.42-5.01-.59-5.88012-3.86-5.63989-8.22009.51978-9.47,2.25-18.77,3.75977-28.09985a26.10874,26.10874,0,0,0-.17994-10.64014c-3.49,7.09009-3.79,13.54-5.22,19.66-1.55,6.62-2.64013,13.34-4.21,19.95008-1.08008,4.52-4.51,6.73-8.41015,5.97-4.64991-.9-7.27-4.29-6.46-9.07007,2.20019-12.90991,4.70019-25.77,7.90014-38.49.32007-1.26,1.97-2.96-.2102-3.85-2.36988-.96-2.6399,1.25-3.1399,2.77-3.48,10.59-5.69995,21.5-8.36987,32.28992-1.47021,5.95007-3.8501,7.76-8.46,6.49-4.92017-1.35986-7.25-5.72-6.03027-10.77991,4.38012-18.04992,8.74023-36.11,12.91015-54.21008.51-2.21,1.54-5.08-1.08007-6.88989-2.68995-1.87012-5.11988-.24-7.40992,1.1-2.28,1.35-4.34008,3.09-6.67016,4.33-4.21,2.24-9.86988,1.27-12.21973-1.87-2.76025-3.7-2.2102-8.88,1.29981-12.75989,2.53-2.78,5.91015-4.31006,9.09008-6.05,11.2-6.13,22.39991-12.26,33.77-18.06006,5.43994-2.77,7.95-7.29,9.32007-12.75,5.30982-21.25,11.34985-42.31006,16.50977-63.61,6.49023-26.77,14.1101-53.25,21-79.92,6.91015-26.76,14.31006-53.38989,20.9602-80.22,4.07984-16.42993,9.01978-32.62,20.47-46.02,8.67993-10.13989,19.97-15.90991,31.79981-20.80994,14.54-6.03,29.34008-11.42,44.02-17.09,8.2102-3.16,16.39013-6.42005,24.64013-9.45008,4.95-1.81994,7.58008-4.6,6.98-10.37-.56-5.28-.19995-10.65991-.06-15.98.08007-2.64-.73-4.08008-3.29-5.32007-18.8899-9.15991-31.77-24.19995-40.89991-42.71991-1.83007-3.71-3.79-7.41-4.69995-11.52-.8601-3.87-3.42016-5.94-6.98-7.67-19.39013-9.4-25.40014-37.07-11.84009-53.81a20.97653,20.97653,0,0,1,9.51-6.21c3.6001-1.28,4.31006-3.34,3.65015-6.91-5.53027-29.65,8.26978-73.38,39.29981-91.98,25.88012-15.51,53.15014-19.32,82.23-11.9,7.27,1.86,13.53,6.05,20.29,8.73,12.76,5.07,21.38013,14.35,29.61011,24.3,10.12988,12.23,14.62988,26.93,17.17993,42.35,1.67994,10.13.72,20.2-.09008,30.29-.17994,2.27.2,3.81,2.73022,5.12,18.87988,9.74,22.79981,28.59,14.34985,46.27-3.33007,6.96-8.96,11.47-16.05,14.11a8.738,8.738,0,0,0-6.04981,6.88c-5.02,20.62-16.90015,36.53-34.3,48.3999a53.49771,53.49771,0,0,1-10.12012,5.3501c-2.72,1.09-3.8601,2.49-3.68994,5.46.3,5.15-.38012,10.28-.67993,15.42-.42016,7.25,1.04981,8.86,7.54981,11.75,18.70019,8.29993,38.12011,14.73,57.1101,22.28992,10.6399,4.24,21.49,8.14014,31.11011,14.57007,12.22,8.16992,20.04981,19.74,24.87988,33.36,7.74,21.79,12.73,44.36,18.57007,66.68006,7.30982,27.92993,14.93994,55.78,21.85987,83.79993,5.9602,24.16,12.7102,48.11,18.90014,72.20007,1.8999,7.37988,4.57984,14.58,6.16992,22.03,2.39014,11.22,11.65992,15.03991,20.08008,19.90991a363.11,363.11,0,0,1,31.22,19.61C562.53226,624.97022,564.36233,628.21021,563.52225,632.44019Z" style="fill:#f7c59f"/></g>
                            <g class="body-part" id="dorsalancho" data-name="Dorsal Ancho"><path d="M279.08347,434.79259c0,15.65666-.296,29.433.08281,43.19074.38288,13.9068-4.21734,25.78294-13.35535,35.95309-8.56162,9.52859-17.54462,18.67881-26.09416,28.21795-2.82844,3.15591-4.35318,2.68455-6.58552-.47057-11.84069-16.73524-21.49724-34.68539-30.35227-53.13273a400.05964,400.05964,0,0,1-30.26561-89.38334c-1.46518-6.80892-2.58232-13.70248-3.59646-20.5958-.91582-6.225,1.61207-8.47853,7.69975-6.98174,14.23974,3.50129,26.87645,10.5552,38.9541,18.5158,18.98557,12.51381,36.989,26.51706,57.11954,37.29579C276.22164,429.29265,279.62386,431.71152,279.08347,434.79259Z" style="fill:#b97b00;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M286.26535,460.50839c0-7.66185.14646-15.32766-.05761-22.98408-.11339-4.25683,1.21119-7.8334,4.8503-9.738,28.60063-14.96865,52.58792-37.40832,82.21-50.69021,5.90124-2.646,11.854-5.18976,17.86446-7.57549,4.25231-1.6879,5.65567-.62031,4.86977,3.835-2.64952,15.021-4.77543,30.129-8.67683,44.93009-10.04346,38.10408-24.22572,74.468-44.80176,108.17862-3.27711,5.369-7.21557,10.33327-10.824,15.50159-1.99183,2.853-3.936,3.09769-6.344.33912-10.06494-11.52982-20.39345-22.83494-30.26366-34.5277a36.92083,36.92083,0,0,1-8.91771-25.28355c.162-7.32511.03223-14.65663.03223-21.98533Z" style="fill:#b97b00;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="gemelostrasero" data-name="Gemelos posteriores" data-legend-name="Gemelos (Posterior)"><path d="M228.077,1030.34974c-3.079,12.3588-5.87823,24.64095-9.87948,36.60442-.3127.93505-.76124,1.83238-.9943,2.78451a2.27108,2.27108,0,0,1-2.69919,1.66932c-1.03409-.10265-1.35863-1.31683-1.51846-2.33975-1.69134-10.82619-3.45848-21.64127-5.0592-32.48076-3.74744-25.37741-5.16685-50.96818-5.38734-76.555-.19186-22.26947.1403-44.6115,3.59207-66.72981a21.408,21.408,0,0,1,1.12362-4.34415c1.19337-3.1099,2.285-6.60951,6.327-6.878,4.2224-.28054,5.60758,3.36176,7.41511,6.22175,3.84863,6.08963,5.57884,12.97376,7.44057,19.819.31685,1.16481.38117,2.98431,2.08478,3.0421,1.55452.05267,1.278-1.67322,1.75981-2.64408,2.35257-4.74114,4.47909-9.6125,7.12281-14.185,1.85818-3.21395,4.10883-6.51316,8.612-6.29236,4.2135.20663,6.271,3.26545,8.1362,6.47537,4.65729,8.01514,5.28872,17.04324,5.9619,25.91073,2.43959,32.13339,1.04264,64.17134-2.75051,96.15742-2.11407,17.82736-4.67046,35.52462-10.22367,52.66239-.589,1.81761-.701,4.33128-3.2696,4.295-2.13549-.03-2.39992-2.17656-3.18094-3.87029C236.8323,1056.96941,232.75081,1043.63224,228.077,1030.34974Z" style="fill:#7b4f9a;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M336.46659,1029.51429c-2.45778,7.41067-4.76768,14.62983-7.25206,21.78846-2.12561,6.12509-4.43093,12.1883-6.70337,18.26139-.55491,1.48281-.636,3.57406-2.84339,3.59371-2.37313.02112-2.8229-2.15349-3.37256-3.79754a176.04481,176.04481,0,0,1-6.24622-24.26466c-2.25059-12.332-2.709-24.86-4.39835-37.224a420.20026,420.20026,0,0,1-3.31854-72.44247c.34559-9.3936.93284-19.0385,3.40612-28.43527,1.20557-4.58051,2.05359-9.18561,4.24242-13.42224,3.44475-6.66755,9.57313-7.31363,14.269-1.46414a56.111,56.111,0,0,1,7.88874,14.37279c.65945,1.62861.88177,4.25591,2.8805,4.2088,2.46815-.05822,2.28849-2.95807,2.77566-4.71373,1.73253-6.244,3.17513-12.54988,6.63325-18.1812,1.98524-3.23281,4.35642-5.4441,8.44951-4.86538,3.97672.56235,5.30361,3.58676,6.3045,6.84733,2.06977,6.743,2.351,13.78456,2.73764,20.71122,1.96993,35.28528,1.5912,70.508-2.45338,105.6973-1.916,16.67079-3.89994,33.32035-6.33886,49.91877-.30134,2.05109-.02666,4.75724-2.9209,5.04394-3.02537.29964-3.13736-2.58055-3.72608-4.498a243.2364,243.2364,0,0,1-7.65373-31.46442C338.50676,1033.26216,338.44292,1031.21217,336.46659,1029.51429Z" style="fill:#7b4f9a;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="gluteos" data-name="Glúteos"><path d="M366.12443,646.55626c-.24044,9.61267-1.89694,19.07816-3.10184,28.59075-.27035,2.1344-1.67663,2.6007-3.08573,1.20033-13.16233-13.08154-31.02233-16.808-47.19991-23.89967-19.95376-8.747-29.22389-25.4955-27.46835-44.14056,1.54073-16.36389,10.19877-29.27358,22.37669-39.88013,4.6314-4.0339,9.6286-7.64745,14.454-11.459,4.8226-3.80944,5.54087-3.78808,9.72014.7837a129.89079,129.89079,0,0,1,20.89942,31.39662,125.09476,125.09476,0,0,1,12.456,46.0314C365.44387,638.95909,366.22427,642.71917,366.12443,646.55626Z" style="fill:#6ca0ae;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M279.99392,611.74137c-.82013,20.24114-10.42457,33.66979-28.04523,41.32078-11.3936,4.94715-23.74263,7.46327-34.72028,13.57322-4.24706,2.36385-8.39935,4.73631-11.56734,8.48729-2.285,2.70542-3.63241,2.44856-4.18128-1.12691-2.45155-15.96979-4.26506-32.00054-1.17854-48.05466a144.19662,144.19662,0,0,1,28.9638-63.13481c7.9602-10.05116,7.99908-10.07923,18.063-2.766,12.54785,9.11837,23.156,19.83385,29.12051,34.55711C278.80385,600.41123,279.49143,606.439,279.99392,611.74137Z" style="fill:#6ca0ae;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="Isquiotibiales" data-name="Isquiotibiales"><path d="M266.14188,774.68669c-.31038,32.6058-2.388,65.12-5.178,97.59684a2.73574,2.73574,0,0,1-.045.49663c-.56419,2.01564.1245,5.27323-2.0257,5.72543-2.6093.54869-3.2665-2.69339-4.2514-4.65679-8.265-16.47606-16.35864-33.00693-20.70377-51.09549-5.34724-22.26092-4.82278-44.87336-3.56418-67.3942a642.66679,642.66679,0,0,1,8.58011-72.172c.58555-3.43211,1.0449-6.8895,1.75237-10.2958.43158-2.07789-.59165-4.88162,1.3333-6.12869a47.20544,47.20544,0,0,1,9.87082-4.64978c2.3118-.82086,1.9709,1.54989,2.29764,2.83944a325.64855,325.64855,0,0,1,7.65355,42.08482C264.49533,729.49733,266.51792,752.01975,266.14188,774.68669Z" style="fill:#6868a6;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M298.68614,792.16553c.08355-48.10708,3.47667-87.43419,12.10816-126.24636.829-3.72786,1.60945-3.93577,5.42481-3.02075,9.53645,2.28715,8.65755,10.115,9.66052,16.60935,4.18487,27.09829,7.525,54.3195,9.08309,81.70456,2.208,38.81125-3.689,76.02582-23.0055,110.39766-.40406.719-.69491,1.50362-1.12026,2.20835-1.07364,1.77916-1.58125,5.07568-3.66548,4.745-2.68565-.42621-2.84425-3.925-3.02495-6.19478C301.7969,842.86215,297.976,813.4393,298.68614,792.16553Z" style="fill:#6868a6;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M195.91206,783.24758c.44189-23.53125,2.16893-44.17,6.48038-64.444a115.24987,115.24987,0,0,1,11.11075-31.28775A39.14447,39.14447,0,0,1,229.33773,671.393c.96342-.52574,2.06849-1.67993,3.17025-.98509,1.32562.83594.66861,2.4607.5039,3.66225-1.35192,9.86374-2.972,19.69258-4.2077,29.56992-1.66858,13.33754-3.39245,26.682-4.50081,40.07237a483.96845,483.96845,0,0,0-2.01368,50.8327c.19864,8.81378.53471,17.62537.91008,26.43366a10.68368,10.68368,0,0,1-1.06649,5.78535,264.12041,264.12041,0,0,0-12.4086,27.15078c-.70967,1.7611-.8817,4.86032-3.75647,4.5168-2.79677-.3343-2.33462-3.4038-2.82655-5.28518-3.06907-11.73682-3.81-23.84376-5.00043-35.845C196.92742,805.065,196.5064,792.74986,195.91206,783.24758Z" style="fill:#6868a6;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M331.99916,670.19607c10.52575,4.40347,17.259,11.86864,21.65822,21.55406,7.15514,15.75247,10.15391,32.60812,12.32633,49.58081a244.9279,244.9279,0,0,1,2.11431,41.32822c-.985,23.5855-2.19035,47.1552-5.864,70.52015-.29,1.84422-.25118,3.78119-2.697,4.12-2.17607.30147-2.837-1.39036-3.51077-2.88972-4.41751-9.83054-9.60377-19.26331-14.82633-28.67515a10.85588,10.85588,0,0,1-1.10635-7.23272c3.15866-19.01426,1.87345-38.115,1.24079-57.20354-.66714-20.12848-2.97174-40.11081-5.44373-60.07654C334.629,691.03148,333.33588,680.84534,331.99916,670.19607Z" style="fill:#6868a6;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="trapeciotrasero" data-name="Trapecio"><path d="M279.101,363.20557q0,22.98505-.00861,45.97013c-.00964,5.77483-1.90121,7.1784-7.40779,5.40351-9.81382-3.16317-17.30058-9.7909-24.30512-16.94059-15.12511-15.43852-23.48675-34.83429-31.32356-54.49068-4.86153-12.19372-9.46731-24.50886-18.88439-34.18131-4.33244-4.44986-9.1028-8.26491-14.96815-10.52774-.85077-.32817-2.226-.0775-2.11005-1.53688.12364-1.55624,1.44083-1.57491,2.612-1.65556,29.66187-2.04166,58.43142,1.25916,86.27966,12.54051,8.16623,3.30814,10.70956,7.48954,10.22165,15.95731-.75563,13.11406-.19943,26.3037-.19943,39.4613Z" style="fill:#8e0000;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M386.41164,296.51318c-.48126,2.15554-2.16363,2.13344-3.25905,2.46354-15.15636,4.56772-23.49425,16.06968-28.5584,29.81506-6.85654,18.61033-13.84124,37.08208-24.611,53.83474-8.59311,13.36683-19.31152,24.53809-34.30238,30.8343-7.70987,3.23814-9.67473,1.89331-9.63818-6.26621q.1915-42.73024.34925-85.46064c.00678-1.988-.3238-3.978-.30226-5.96495.03308-3.05684,1.21424-5.42723,4.32109-6.53967,15.88105-5.68659,31.90416-10.17245,48.81912-12.46151,13.0097-1.76055,25.8188-1.24585,38.722-1.6229A20.09331,20.09331,0,0,1,386.41164,296.51318Z" style="fill:#8e0000;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M278.75314,262.76231q0,17.73325-.00824,35.46656c-.0033,2.22786.22854,4.52446-3.41595,2.963-17.03548-7.29856-35.03-10.94046-53.24059-13.735-1.35912-.20855-3.54709.574-3.87328-1.27874-.3465-1.9677,1.82036-2.41643,3.2964-3.06309,5.26315-2.3057,10.60661-4.44293,15.78365-6.92725,13.70229-6.57522,20.09912-18.11486,21.6653-32.73621.51329-4.79246.6019-9.62891,1.02133-14.4333.45569-5.21927,3.85833-10.0409,7.40292-10.75332,7.20238-1.4476,11.35533,1.89063,11.43418,9.5313.12028,11.65413.03155,23.3104.03155,34.96578Z" style="fill:#8e0000;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M286.11333,262.28939q0-16.73483.00445-33.46972c.01209-7.75238,1.638-10.28522,6.76586-10.66959a11.16456,11.16456,0,0,1,12.20831,9.91531c.88286,7.24809.93077,14.59846,1.82706,21.84427,1.33556,10.79643,7.58245,18.48931,16.45549,24.295a84.79015,84.79015,0,0,0,18.82367,9.04367c1.38426.47976,3.83563.37217,3.57169,2.67445-.23349,2.03663-2.38558,1.33043-3.73457,1.554-17.836,2.9559-35.61035,6.14553-52.29065,13.54085-3.15555,1.399-3.41009-.02911-3.38232-2.75656.12205-11.9895.0526-23.981.0526-35.9717Z" style="fill:#8e0000;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="hombrotrasero" data-name="Hombros"><path d="M123.88643,361.82543c.84564-18.32558,4.43953-35.61482,18.65694-48.82777,12.27818-11.4107,30.30034-12.94557,43.62316-3.86843,2.49055,1.69684,2.69614,2.323.30873,4.83258-7.548,7.93446-14.40293,16.5226-21.71949,24.68431-10.89019,12.14805-22.32047,23.74372-35.886,32.9895-1.1537.78633-2.286,2.297-3.959,1.31814-1.36937-.80121-.94981-2.37447-.997-3.64074C123.82082,366.82028,123.88643,364.32165,123.88643,361.82543Z" style="fill:#cc5116;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M442.2265,372.62306c-5.26718-.335-8.91276-2.86512-12.61718-5.32226-16.09348-10.67471-27.60071-25.66112-38.69687-41.04234-3.30934-4.58732-6.58754-9.3553-11.37542-12.41815-3.83892-2.45573-1.97542-3.80828.388-5.0452,11.50968-6.02378,23.24845-7.59026,35.10451-.98127,15.2075,8.47741,21.55728,22.73632,25.06263,38.80857C441.94688,355.12591,440.66105,363.81489,442.2265,372.62306Z" style="fill:#cc5116;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="Braquiorradialtrasero" data-name="Braquiorradial"><path d="M77.88214,588.34035c-.46276-34.29171,3.62112-65.09791,12.0984-95.33094.44506-1.58711.4937-3.697,2.39192-3.961,1.98617-.27627,2.45192,1.80161,3.20663,3.26759,13.1835,25.60584,12.67558,51.75365,3.23079,78.303-4.74113,13.32735-10.56639,26.18614-16.54782,38.98171-.67727,1.44882-1.26928,3.74933-3.11222,3.27583-1.86758-.47979-1.21527-2.86476-1.23163-4.43686C77.83851,600.777,77.88214,593.113,77.88214,588.34035Z" style="fill:#bec043;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M457.8397,528.2c.6337-2.7731,1.19661-6.22249,2.22075-9.52908,2.841-9.17444,5.89526-18.28268,8.80975-27.43479.46331-1.45475.6697-3.08757,2.59557-3.14157,1.96-.055,2.26517,1.617,2.70651,3.04045a271.14787,271.14787,0,0,1,10.96789,54.4684c1.862,19.36828,2.0279,38.8148,2.05695,58.25912.00281,1.96712.61466,3.92777.7029,5.90215a3.28257,3.28257,0,0,1-2.31766,3.467c-1.48806.42669-1.91122-1.146-2.361-2.09332-2.41664-5.09106-4.93617-10.15026-7.0168-15.38089-7.04731-17.71807-13.77058-35.55489-16.75476-54.52235C458.806,537.14252,458.4258,533.00842,457.8397,528.2Z" style="fill:#bec043;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="Infraespinoso" data-name="Infraespinoso"><path d="M406.16437,358.063c-15.01612,1.17137-27.71239,6.98361-40.32505,12.98029a208.92467,208.92467,0,0,0-23.58378,12.94984c-1.03794.669-2.14971,2.07868-3.49583.78465-1.37694-1.32378.10265-2.48792.72456-3.47884a181.95568,181.95568,0,0,0,21.5211-48.04752,33.147,33.147,0,0,1,2.17357-5.55538c3.77948-7.766,10.71084-9.1169,16.94248-3.05476,8.02471,7.80645,13.66719,17.54625,20.66349,26.19624C402.5349,353.00115,404.11633,355.301,406.16437,358.063Z" style="fill:#f48a02;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M163.2447,360.13739a19.88587,19.88587,0,0,1-2.53655.13584c-1.09939-.10353-2.51044.59083-3.2225-.57926-.79614-1.308.57621-2.10788,1.27808-2.91489,10.47393-12.04433,21.06095-23.99154,31.43462-36.12128,2.78018-3.25072,4.54933-2.1675,6.3908.6056A101.212,101.212,0,0,1,207.11288,342.631c4.90828,13.40024,9.81235,26.79841,17.66558,38.87024.60977.93739,2.23173,2.1566.84,3.41966-1.26294,1.14611-2.40426-.21884-3.49254-.915-13.74543-8.79255-27.935-16.66436-43.79873-21.0484C173.20394,361.54163,168.05614,360.25105,163.2447,360.13739Z" style="fill:#f48a02;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="extensordedos" data-name="Extensor de los Dedos"><path d="M133.39712,511.51264c-4.54828,26.1707-8.76331,52.41713-22.01839,76.09753-4.87081,8.7018-9.81864,17.33494-15.51526,25.52388-.99656,1.43247-1.70861,3.93308-3.9213,2.94085-2.08783-.93626-.44171-2.92267.03491-4.31083,7.74893-22.57125,12.173-46.13777,20.33083-68.56383,4.21069-11.57522,10.63767-22.11343,17.64361-32.24977.66073-.9561,1.34929-2.1942,2.6353-1.9357C133.83657,509.26608,133.6228,510.504,133.39712,511.51264Z" style="fill:#77aa4b;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M429.67633,512.36536c.34907-1.81461-.60062-3.58242,1.2558-3.96683,1.28313-.26565,1.774,1.20094,2.43079,2.13824,5.89539,8.41388,11.23457,17.22607,16.58865,25.94734,3.30946,5.3907,3.54392,12.62616,5.39045,18.96594,5.4721,18.789,11.95053,37.23421,19.19886,55.41181.618,1.54958,2.45472,3.43895.15623,4.80807-2.31741,1.38048-3.62374-.67379-4.71818-2.33547-12.4014-18.82942-23.78279-38.08944-30.3768-59.96346C435.46723,539.65467,432.32218,525.79761,429.67633,512.36536Z" style="fill:#77aa4b;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="oblicuotrasero" data-name="Oblicuos"><path d="M196.47185,491.23208c2.81057,6.09451,5.05817,11.20443,7.5008,16.21938a392.2953,392.2953,0,0,0,22.5381,39.80239c1.52108,2.37392,1.534,3.95328-.2048,6.11563a161.592,161.592,0,0,0-18.83277,29.24013c-.55619,1.11654-.99528,2.9065-2.61839,2.42775-1.63154-.48125-.89294-2.266-.91656-3.49259a568.37759,568.37759,0,0,0-7.56884-79.22183C195.8691,499.20706,194.56539,495.92549,196.47185,491.23208Z" style="fill:#5b7f97;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M370.01767,495.89565c-2.749,14.381-4.64776,28.50593-6.09189,42.71529-1.42887,14.06076-2.79366,28.10694-2.71335,42.25955.00781,1.378.87255,3.51291-.838,3.98361-2.289.62985-2.13244-1.9418-2.82326-3.27083-5.07513-9.7642-10.75075-19.16433-18.15385-27.33672-2.65818-2.93445-2.59929-4.96736-.48412-8.1583,10.46314-15.78513,20.491-31.83364,27.48757-49.56214.47478-1.20325.75966-3.32172,2.65733-3.141C370.67187,493.53875,369.92539,495.21044,370.01767,495.89565Z" style="fill:#5b7f97;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                            <g class="body-part" id="triceps" data-name="Tríceps"><path d="M162.385,390.98288c-.18442,36.36834-10.55144,65.967-26.15158,94.05473-.56162,1.01132-.98679,2.34334-2.38185,2.12969-1.50131-.23-1.91824-1.779-2.40206-2.94836a117.91861,117.91861,0,0,1-8.13089-28.6242c-2.89527-20.55234-1.91074-40.74576,6.78008-59.98006a92.40369,92.40369,0,0,1,19.8677-28.97442c3.60354-3.47316,4.92013-3.28929,7.47908,1.08129C162.3802,376.14989,162.556,385.433,162.385,390.98288Z" style="fill:#a8915b;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M402.86615,398.57782c-.90563-10.084,1.65161-20.49068,3.20046-30.98684.65469-4.43609,3.83343-2.60124,5.53252-1.171a84.107,84.107,0,0,1,10.278,10.17073c20.26658,24.15082,25.59686,51.87031,18.9467,82.20608-1.875,8.553-4.50874,16.941-6.85752,25.38712-.33882,1.21857-.5507,2.77322-2.106,3.10923-2.0002.43206-1.81932-1.54561-2.4131-2.54474C413.76544,458.367,401.85421,430.80016,402.86615,398.57782Z" style="fill:#a8915b;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M97.92457,454.95464c.38978-25.93987,6.85044-47.06848,22.02987-65.13385a39.56619,39.56619,0,0,1,2.71579-2.91974c1.08084-1.05014,2.38814-2.34259,3.89873-1.442,2.0423,1.21774.62753,3.00044-.01672,4.36039a135.46452,135.46452,0,0,0-11.80773,37.81741,126.51244,126.51244,0,0,0-1.41239,27.27582c.527,8.121-5.00434,13.53215-8.85613,19.54758-1.5707,2.45307-2.97772-.42139-3.5175-2.0619C98.81464,465.88237,97.68852,459.19718,97.92457,454.95464Z" style="fill:#a8915b;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/><path d="M434.50619,380.24189c6.82286,4.40292,11.35223,9.83661,15.45039,15.59371,9.698,13.62391,13.99734,29.08708,15.3,45.5939.74745,9.4711,1.11764,18.90418-.01562,28.36087-.25509,2.12835.02368,4.65063-2.5332,5.42322-3.01641.91149-3.19912-2.19188-4.411-3.74719a14.84574,14.84574,0,0,1-1.06515-2.24077c-3.88982-7.33749-6.48844-14.45169-5.77052-23.47889,1.67187-21.02486-4.42844-40.64521-14.83158-58.916C435.67057,385.14663,434.40318,383.58918,434.50619,380.24189Z" style="fill:#a8915b;stroke:#442a0c;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px"/></g>
                        </g>
                   </svg>
            </div>
        </div>
    </div>
    <div class="body-insights">
        <div class="body-summary">
            <h3 class="body-summary-title">Porcentaje de trabajo por zonas del cuerpo</h3>
            <div class="body-summary-row">
                <span class="body-summary-label">Periodo:</span>
                <span class="body-summary-value" data-summary="period">-</span>
            </div>
            <div class="body-summary-row">
                <span class="body-summary-label">Rango:</span>
                <span class="body-summary-value" data-summary="range">-</span>
            </div>
            <div class="body-summary-row">
                <span class="body-summary-label">Rutinas consideradas:</span>
                <span class="body-summary-value" data-summary="routines">0</span>
            </div>
            <ul class="body-metrics">
                <li class="body-metric" data-metric="ejercicios">
                    <span class="body-metric-label">Ejercicios</span>
                    <span class="body-metric-value">0</span>
                </li>
                <li class="body-metric" data-metric="series">
                    <span class="body-metric-label">Series</span>
                    <span class="body-metric-value">0</span>
                </li>
                <li class="body-metric" data-metric="repeticiones">
                    <span class="body-metric-label">Repeticiones</span>
                    <span class="body-metric-value">0</span>
                </li>
                <li class="body-metric" data-metric="peso">
                    <span class="body-metric-label">Carga acumulada</span>
                    <span class="body-metric-value">0 kg</span>
                </li>
            </ul>
<?php if ($viewerHasDelta): ?>
            <div class="body-summary-delta" data-delta-hint hidden>
                <span class="delta-legend-item">
                    <span class="delta-swatch delta-swatch--positive"></span>
                    Más trabajo en el periodo B
                </span>
                <span class="delta-legend-item">
                    <span class="delta-swatch delta-swatch--negative"></span>
                    Menos trabajo en el periodo B
                </span>
            </div>
<?php endif; ?>
            <p class="body-summary-hint">Los porcentajes se calculan con las rutinas registradas en el rango seleccionado.</p>
        </div>
        <div class="body-legend">
            <ul class="body-legend-list"></ul>
        </div>
        <div class="body-viewer-empty" hidden>
            <p>No se registran rutinas para este periodo.</p>
        </div>
    </div>
    <div class="body-viewer-tooltip" data-body-tooltip></div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const viewerContainer = document.getElementById('<?php echo htmlspecialchars($viewerId, ENT_QUOTES, 'UTF-8'); ?>');
        if (!viewerContainer) {
            return;
        }

        const viewerRoot = viewerContainer.closest('.body-viewer-grid') || viewerContainer.parentElement || viewerContainer;
        const bodyParts = viewerContainer.querySelectorAll('.body-part');
        const filterButtons = viewerContainer.querySelectorAll('.btn-filter');
        const legendList = viewerRoot.querySelector('.body-legend-list');
        const summaryPeriod = viewerRoot.querySelector('[data-summary="period"]');
        const summaryRange = viewerRoot.querySelector('[data-summary="range"]');
        const summaryRoutines = viewerRoot.querySelector('[data-summary="routines"]');
        const metricItems = viewerRoot.querySelectorAll('.body-metric');
        const deltaHint = viewerRoot.querySelector('[data-delta-hint]');
        const emptyState = viewerRoot.querySelector('.body-viewer-empty');
        const tooltip = viewerRoot.querySelector('[data-body-tooltip]');

        let progresoDataset = window.progresoData ? { ...window.progresoData } : {};
        let explicitDefaultPeriod = viewerContainer.dataset.defaultPeriod || null;
        let currentPeriod = null;
        let tooltipVisible = false;
        let activeTooltipPart = null;

        const rootStyles = getComputedStyle(document.documentElement);
        const colorSuccess = (rootStyles.getPropertyValue('--color-success') || '#3CCB73').trim() || '#3CCB73';
        const colorError = (rootStyles.getPropertyValue('--color-error') || '#FF5A5F').trim() || '#FF5A5F';
        const colorNeutral = (rootStyles.getPropertyValue('--color-body-neutral') || '#9CA3AF').trim() || '#9CA3AF';
        const inactiveFill = (rootStyles.getPropertyValue('--color-muscle-inactive') || '#3a3a3a').trim() || '#3a3a3a';
        const defaultStrokeColor = (rootStyles.getPropertyValue('--color-body-stroke')
            || rootStyles.getPropertyValue('--color-border-strong')
            || 'rgba(255, 255, 255, 0.32)').trim() || 'rgba(255, 255, 255, 0.32)';
        const defaultHighlightHsl = { h: 137, s: 42, l: 38 };

        const escapeId = (value) => window.CSS && CSS.escape ? CSS.escape(value) : value;
        const clamp = (value, min, max) => Math.min(Math.max(value, min), max);
        const shapeSelector = 'path, polygon, rect, circle, ellipse, polyline';

        function applyStylesToGroup(element, styles) {
            if (!element || !styles) {
                return;
            }

            const targets = [element, ...element.querySelectorAll(shapeSelector)];
            Object.entries(styles).forEach(([property, value]) => {
                const applied = value == null ? '' : value;
                targets.forEach(target => {
                    target.style[property] = applied;
                });
            });
        }

        const periodLabels = {};
        filterButtons.forEach(button => {
            const periodKey = button.dataset.period;
            const label = button.dataset.label || button.textContent.trim();
            if (periodKey) {
                periodLabels[periodKey] = label;
            }
        });

        const allBodyPartIds = Array.from(new Set(Array.from(bodyParts).map(part => part.id)));

        function rgbToHsl(r, g, b) {
            r /= 255;
            g /= 255;
            b /= 255;

            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h;
            let s;
            const l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r:
                        h = (g - b) / d + (g < b ? 6 : 0);
                        break;
                    case g:
                        h = (b - r) / d + 2;
                        break;
                    default:
                        h = (r - g) / d + 4;
                        break;
                }
                h /= 6;
            }

            return {
                h: Math.round(h * 360),
                s: Math.round(s * 100),
                l: Math.round(l * 100)
            };
        }

        function hexToHsl(hex) {
            let value = hex.trim();
            if (value.startsWith('#')) {
                value = value.substring(1);
            }

            if (value.length === 3) {
                value = value.split('').map(char => char + char).join('');
            }

            if (value.length !== 6) {
                return null;
            }

            const num = parseInt(value, 16);
            const r = (num >> 16) & 255;
            const g = (num >> 8) & 255;
            const b = num & 255;

            return rgbToHsl(r, g, b);
        }

        function parseHslString(color) {
            const match = color.match(/hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%/i);
            if (!match) {
                return null;
            }

            return {
                h: Number(match[1]),
                s: Number(match[2]),
                l: Number(match[3])
            };
        }

        function parseRgbString(color) {
            const match = color.match(/rgba?\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)/i);
            if (!match) {
                return null;
            }

            return rgbToHsl(Number(match[1]), Number(match[2]), Number(match[3]));
        }

        function colorStringToHsl(color) {
            if (!color || typeof color !== 'string') {
                return null;
            }

            const value = color.trim();

            if (value.startsWith('#')) {
                return hexToHsl(value);
            }

            if (value.toLowerCase().startsWith('rgb')) {
                return parseRgbString(value);
            }

            if (value.toLowerCase().startsWith('hsl')) {
                return parseHslString(value);
            }

            return null;
        }

        function hslToCss(h, s, l) {
            return `hsl(${Math.round(h)}, ${Math.round(s)}%, ${Math.round(l)}%)`;
        }

        function hslToCssAlpha(h, s, l, a) {
            return `hsla(${Math.round(h)}, ${Math.round(s)}%, ${Math.round(l)}%, ${a.toFixed(2)})`;
        }

        function extractInlineStyleValue(styleValue, property) {
            if (!styleValue) {
                return null;
            }
            const regex = new RegExp(`${property}\\s*:\\s*([^;]+)`, 'i');
            const match = styleValue.match(regex);
            return match ? match[1].trim() : null;
        }

        function extractInlineFill(styleValue) {
            return extractInlineStyleValue(styleValue, 'fill');
        }

        function captureBaseStrokeAttributes(element) {
            if (!element || element.dataset.baseStrokeCaptured) {
                return;
            }
            const styleAttr = element.getAttribute('style') || '';
            const stroke = element.getAttribute('stroke') || extractInlineStyleValue(styleAttr, 'stroke');
            const strokeWidth = element.getAttribute('stroke-width') || extractInlineStyleValue(styleAttr, 'stroke-width');
            const strokeDasharray = element.getAttribute('stroke-dasharray') || extractInlineStyleValue(styleAttr, 'stroke-dasharray');
            const strokeOpacity = element.getAttribute('stroke-opacity') || extractInlineStyleValue(styleAttr, 'stroke-opacity');

            if (stroke) {
                element.dataset.baseStroke = stroke;
            }
            if (strokeWidth) {
                element.dataset.baseStrokeWidth = strokeWidth;
            }
            if (strokeDasharray) {
                element.dataset.baseStrokeDasharray = strokeDasharray;
            }
            if (strokeOpacity) {
                element.dataset.baseStrokeOpacity = strokeOpacity;
            }
            element.dataset.baseStrokeCaptured = 'true';
        }

        function restoreStrokeAttributes(element) {
            if (!element) {
                return;
            }

            const fallbackStroke = element.dataset.baseStroke || defaultStrokeColor;
            const fallbackStrokeWidth = element.dataset.baseStrokeWidth || '';
            const fallbackStrokeDasharray = element.dataset.baseStrokeDasharray || '';
            const fallbackStrokeOpacity = element.dataset.baseStrokeOpacity || '';

            const targets = [element, ...element.querySelectorAll(shapeSelector)];
            targets.forEach(target => {
                const stroke = target.dataset.baseStroke || fallbackStroke;
                const strokeWidth = target.dataset.baseStrokeWidth || fallbackStrokeWidth;
                const strokeDasharray = target.dataset.baseStrokeDasharray || fallbackStrokeDasharray;
                const strokeOpacity = target.dataset.baseStrokeOpacity || fallbackStrokeOpacity;

                target.style.stroke = stroke;
                target.style.strokeWidth = strokeWidth;
                target.style.strokeDasharray = strokeDasharray;
                target.style.strokeOpacity = strokeOpacity;
            });
        }

        function resolveBaseColor(element) {
            if (!element) {
                return null;
            }

            if (element.dataset.baseColor) {
                return element.dataset.baseColor;
            }

            const direct = element.getAttribute('data-color')
                || element.getAttribute('fill')
                || extractInlineFill(element.getAttribute('style'));

            if (direct) {
                return direct;
            }

            const child = element.querySelector('path, polygon, rect, circle, ellipse');
            if (child) {
                const childColor = child.getAttribute('fill')
                    || extractInlineFill(child.getAttribute('style'));
                if (childColor) {
                    return childColor;
                }
            }

            return null;
        }

        function computeVisualPalette(element, intensity, overrideColor = null) {
            const ratio = clamp(intensity, 0, 1);
            const storedBase = element ? (element.dataset.baseColor || resolveBaseColor(element)) : null;
            const fallbackBase = storedBase || hslToCss(defaultHighlightHsl.h, defaultHighlightHsl.s, defaultHighlightHsl.l);
            const sourceColor = overrideColor || fallbackBase;
            const baseHsl = colorStringToHsl(sourceColor) || defaultHighlightHsl;

            if (overrideColor) {
                const saturation = clamp(baseHsl.s * (0.9 + ratio * 0.25), 58, 100);
                const lightness = clamp(38 + ratio * 34, 42, 85);
                const fill = hslToCss(baseHsl.h, saturation, lightness);
                const glowLightness = clamp(lightness + 14, 48, 94);
                const glow = hslToCssAlpha(baseHsl.h, saturation, glowLightness, clamp(0.45 + ratio * 0.4, 0.45, 0.92));
                const swatch = storedBase || fallbackBase;
                return { fill, glow, swatch, base: fallbackBase };
            }

            const baseColorHsl = colorStringToHsl(fallbackBase) || defaultHighlightHsl;
            const saturation = clamp(baseColorHsl.s + ratio * 12, 45, 96);
            const lightness = clamp(baseColorHsl.l + ratio * 10, 30, 80);
            const glowLightness = clamp(lightness + 12, 42, 92);
            const glow = hslToCssAlpha(baseColorHsl.h, saturation, glowLightness, clamp(0.28 + ratio * 0.32, 0.28, 0.75));
            const fill = storedBase || hslToCss(baseColorHsl.h, clamp(baseColorHsl.s, 40, 92), clamp(baseColorHsl.l, 26, 64));
            const swatch = storedBase || fallbackBase;

            return { fill, glow, swatch, base: swatch };
        }

        function showTooltip(part, event) {
            if (!tooltip) {
                return;
            }
            activeTooltipPart = part;
            tooltipVisible = true;
            updateTooltip(part, event);
            tooltip.classList.add('is-visible');
        }

        function updateTooltip(part, event) {
            const targetPart = part || activeTooltipPart;
            if (!tooltip || !tooltipVisible || !targetPart) {
                return;
            }

            const nombre = targetPart.dataset.legendName || targetPart.dataset.name || targetPart.id || '';
            const porcentajeRaw = targetPart.dataset.porcentaje;
            const porcentaje = porcentajeRaw != null
                ? (String(porcentajeRaw).trim().endsWith('%') ? String(porcentajeRaw).trim() : `${String(porcentajeRaw).trim()}%`)
                : '0%';

            tooltip.textContent = `${nombre}: ${porcentaje}`;

            const offsetX = 16;
            const offsetY = 18;
            const pageX = event.pageX || (event.clientX + window.scrollX);
            const pageY = event.pageY || (event.clientY + window.scrollY);

            tooltip.style.left = `${pageX + offsetX}px`;
            tooltip.style.top = `${pageY + offsetY}px`;
        }

        function hideTooltip() {
            if (!tooltip) {
                return;
            }
            tooltipVisible = false;
            activeTooltipPart = null;
            tooltip.classList.remove('is-visible');
        }

        function formatDate(value) {
            if (!value) {
                return '-';
            }

            const date = new Date(`${value}T00:00:00`);
            if (Number.isNaN(date.getTime())) {
                return value;
            }

            return date.toLocaleDateString('es-CR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
        }

        function formatDuration(seconds) {
            if (!Number.isFinite(seconds) || seconds <= 0) {
                return '0';
            }
            const totalSeconds = Math.round(seconds);
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const secs = totalSeconds % 60;

            if (hours > 0) {
                return `${hours}h ${minutes.toString().padStart(2, '0')}m`;
            }
            if (minutes > 0) {
                return `${minutes}m ${secs.toString().padStart(2, '0')}s`;
            }
            return `${secs}s`;
        }

        function formatMetricValue(key, rawValue, mode) {
            const deltaMode = mode === 'delta';
            if (rawValue == null || rawValue === '') {
                return { text: '0', trend: null };
            }

            if (typeof rawValue === 'string' && rawValue.trim() !== '' && Number.isNaN(Number(rawValue))) {
                return { text: rawValue, trend: null };
            }

            const numericValue = Number(rawValue);
            if (!Number.isFinite(numericValue)) {
                return { text: '0', trend: null };
            }

            const signSymbol = deltaMode ? (numericValue > 0 ? '+' : (numericValue < 0 ? '−' : '')) : '';
            const absoluteValue = deltaMode ? Math.abs(numericValue) : numericValue;
            const trend = !deltaMode ? null : (numericValue > 0 ? 'positive' : (numericValue < 0 ? 'negative' : null));

            const numberFormatter = new Intl.NumberFormat('es-CR', { maximumFractionDigits: key === 'peso' ? 1 : (key === 'volumen' ? 0 : 0) });
            let text;
            switch (key) {
                case 'peso': {
                    const formatted = numberFormatter.format(absoluteValue);
                    text = `${signSymbol}${formatted} kg`;
                    break;
                }
                case 'tiempo': {
                    const formatted = formatDuration(absoluteValue);
                    text = signSymbol ? `${signSymbol}${formatted}` : formatted;
                    break;
                }
                case 'volumen': {
                    const formatted = numberFormatter.format(absoluteValue);
                    text = signSymbol ? `${signSymbol}${formatted}` : formatted;
                    break;
                }
                default: {
                    const formatted = numberFormatter.format(absoluteValue);
                    text = signSymbol ? `${signSymbol}${formatted}` : formatted;
                }
            }

            return { text, trend };
        }

        function resetBodyParts() {
            bodyParts.forEach(part => {
                part.classList.remove('active');
                part.classList.add('inactive');
                part.classList.remove('has-delta-trend');
                part.style.opacity = 0.22;
                part.style.filter = 'grayscale(100%) contrast(0.6) brightness(0.78)';
                applyStylesToGroup(part, {
                    fill: inactiveFill,
                    stroke: '',
                    strokeWidth: '',
                    strokeDasharray: '',
                    strokeOpacity: ''
                });
                restoreStrokeAttributes(part);
                delete part.dataset.porcentaje;
                delete part.dataset.color;
                delete part.dataset.trend;
            });
        }

        function updateSummary(periodKey, dataset) {
            const mode = dataset.mode || dataset.modo || 'intensity';
            viewerContainer.dataset.mode = mode;
            if (deltaHint) {
                deltaHint.hidden = mode !== 'delta';
            }
            if (summaryPeriod) {
                const label = dataset.label || dataset.nombre || periodLabels[periodKey] || (periodKey || '-');
                summaryPeriod.textContent = label;
            }

            if (summaryRange) {
                const fechaInicio = dataset.fechaInicio ?? dataset.fecha_inicio ?? null;
                const fechaFin = dataset.fechaFin ?? dataset.fecha_fin ?? null;
                if (fechaInicio && fechaFin) {
                    summaryRange.textContent = (fechaInicio === fechaFin)
                        ? formatDate(fechaInicio)
                        : `${formatDate(fechaInicio)} - ${formatDate(fechaFin)}`;
                } else {
                    summaryRange.textContent = '-';
                }
            }

            if (summaryRoutines) {
                const meta = dataset.meta || {};
                if (dataset.rutinas != null) {
                    summaryRoutines.textContent = dataset.rutinas;
                } else if (meta.rutinasTexto) {
                    summaryRoutines.textContent = meta.rutinasTexto;
                } else {
                    summaryRoutines.textContent = '0';
                }
            }

            const metricas = dataset.metricas || dataset.metrics || {};
            metricItems.forEach(item => {
                const key = item.dataset.metric;
                const valueElement = item.querySelector('.body-metric-value');
                if (!valueElement || !key) {
                    return;
                }
                const formatted = formatMetricValue(key, metricas[key], mode);
                valueElement.textContent = formatted.text;
                item.classList.toggle('is-positive', formatted.trend === 'positive');
                item.classList.toggle('is-negative', formatted.trend === 'negative');
                if (formatted.trend) {
                    item.dataset.trend = formatted.trend;
                    valueElement.dataset.trend = formatted.trend;
                } else {
                    delete item.dataset.trend;
                    delete valueElement.dataset.trend;
                }
            });
        }

        function buildLegendItem(options) {
            const { color, swatch: swatchOverride, name, value, note, isInactive, trend, fullWidth } = options;
            const item = document.createElement('li');
            item.className = 'body-legend-item' + (isInactive ? ' is-inactive' : '');
            if (trend) {
                item.classList.add(`is-${trend}`);
                item.dataset.trend = trend;
            }
            if (trend === 'neutral') {
                item.classList.add('is-neutral');
            }
            if (fullWidth) {
                item.style.gridColumn = '1 / -1';
            }

            const swatchEl = document.createElement('span');
            swatchEl.className = 'body-legend-swatch' + (isInactive ? ' is-inactive' : '');
            const swatchColor = swatchOverride || color;
            if (swatchColor && !isInactive) {
                swatchEl.style.background = swatchColor;
            }

            const textWrapper = document.createElement('div');
            textWrapper.className = 'body-legend-text';

            const mainRow = document.createElement('div');
            mainRow.className = 'body-legend-main';

            const nameEl = document.createElement('span');
            nameEl.className = 'body-legend-name';
            nameEl.textContent = name;
            mainRow.appendChild(nameEl);

            if (value != null) {
                const valueEl = document.createElement('span');
                valueEl.className = 'body-legend-value';
                valueEl.textContent = value;
                if (trend) {
                    valueEl.classList.add(`is-${trend}`);
                }
                mainRow.appendChild(valueEl);
            }

            textWrapper.appendChild(mainRow);

            if (note) {
                const noteEl = document.createElement('span');
                noteEl.className = 'body-legend-note';
                noteEl.textContent = note;
                textWrapper.appendChild(noteEl);
            }

            item.appendChild(swatchEl);
            item.appendChild(textWrapper);

            return item;
        }

        function updateLegend(porcentajes, dataset) {
            if (!legendList) {
                return;
            }
            legendList.innerHTML = '';
            const entries = Object.entries(porcentajes || {});
            const mode = dataset.mode || dataset.modo || 'intensity';
            const deltaMode = mode === 'delta';

            const sortedEntries = entries.sort(([, a], [, b]) => {
                const valueA = deltaMode ? Math.abs(Number(a) || 0) : Number(a) || 0;
                const valueB = deltaMode ? Math.abs(Number(b) || 0) : Number(b) || 0;
                return valueB - valueA;
            });

            const maxValor = sortedEntries.length
                ? Math.max(...sortedEntries.map(([, value]) => {
                    const numeric = Number(value) || 0;
                    return deltaMode ? Math.abs(numeric) : numeric;
                }))
                : 0;

            if (!sortedEntries.length) {
                legendList.appendChild(buildLegendItem({
                    name: 'No se registran zonas trabajadas en este periodo.',
                    note: null,
                    color: inactiveFill,
                    isInactive: true,
                    fullWidth: true
                }));
            } else {
                sortedEntries.forEach(([parteId, valor]) => {
                    const elementos = viewerContainer.querySelectorAll(`#${escapeId(parteId)}`);
                    const elemento = elementos.length ? elementos[0] : null;
                    const nombre = elemento
                        ? (elemento.dataset.legendName || elemento.dataset.name || parteId)
                        : parteId;
                    const numericValue = Number(valor) || 0;
                    const intensidad = maxValor > 0 ? (deltaMode ? Math.abs(numericValue) : numericValue) / maxValor : 0;
                    const trend = !deltaMode
                        ? null
                        : (numericValue > 0 ? 'positive' : (numericValue < 0 ? 'negative' : 'neutral'));
                    const overrideColor = !deltaMode
                        ? null
                        : (trend === 'positive' ? colorSuccess : (trend === 'negative' ? colorError : colorNeutral));
                    const palette = computeVisualPalette(elemento, intensidad || 0.45, overrideColor);
                    const storedBaseColor = elemento
                        ? (elemento.dataset.baseColor || null)
                        : null;
                    const swatchColor = storedBaseColor || palette.base || palette.swatch || inactiveFill;
                    const displayValue = deltaMode
                        ? `${numericValue > 0 ? '+' : (numericValue < 0 ? '−' : '')}${Math.round(Math.abs(numericValue))}%`
                        : `${Math.round(numericValue)}%`;

                    legendList.appendChild(buildLegendItem({
                        color: swatchColor,
                        swatch: swatchColor,
                        name: nombre,
                        value: displayValue,
                        trend,
                        note: trend === 'neutral' ? 'Sin cambios relevantes' : undefined
                    }));
                });
            }

            const inactiveCount = allBodyPartIds.filter(id => {
                const hasEntry = porcentajes && Object.prototype.hasOwnProperty.call(porcentajes, id);
                if (!hasEntry) {
                    return true;
                }
                const numeric = Number(porcentajes[id]) || 0;
                if (deltaMode) {
                    return false;
                }
                return numeric <= 0;
            }).length;

            if (inactiveCount > 0) {
                legendList.appendChild(buildLegendItem({
                    name: 'Zonas sin actividad registrada',
                    note: `${inactiveCount} ${inactiveCount === 1 ? 'zona' : 'zonas'}`,
                    isInactive: true,
                    fullWidth: true
                }));
            }

            if (deltaMode) {
                legendList.appendChild(buildLegendItem({
                    name: 'Interpretación',
                    note: 'Verde indica más trabajo en el periodo B, rojo refleja retroceso y los contornos punteados señalan zonas sin cambios.',
                    isInactive: true,
                    fullWidth: true
                }));
            }
        }

        function aplicarProgresoVisual(periodKey) {
            const dataset = progresoDataset[periodKey];
            if (!dataset) {
                resetBodyParts();
                updateSummary(periodKey, {});
                updateLegend({}, {});
                if (emptyState) {
                    emptyState.removeAttribute('hidden');
                }
                return;
            }

            const porcentajes = dataset.porcentajes || {};
            const mode = dataset.mode || dataset.modo || 'intensity';
            const deltaMode = mode === 'delta';
            const valores = Object.values(porcentajes).map(value => Number(value) || 0);
            const maxPorcentaje = valores.length
                ? Math.max(...valores.map(value => deltaMode ? Math.abs(value) : value))
                : 0;

            hideTooltip();
            resetBodyParts();

            if (maxPorcentaje > 0) {
                Object.entries(porcentajes).forEach(([parteId, porcentaje]) => {
                    const elementos = viewerContainer.querySelectorAll(`#${escapeId(parteId)}`);
                    if (!elementos.length) {
                        return;
                    }

                    const numericValue = Number(porcentaje) || 0;
                    const intensidadRelativa = maxPorcentaje > 0
                        ? (deltaMode ? Math.abs(numericValue) : numericValue) / maxPorcentaje
                        : 0;
                    const glowRadiusValue = deltaMode
                        ? 6 + intensidadRelativa * 18
                        : 4 + intensidadRelativa * 12;
                    const glowRadius = glowRadiusValue.toFixed(2);

                    elementos.forEach(el => {
                        const trend = deltaMode
                            ? (numericValue > 0 ? 'positive' : (numericValue < 0 ? 'negative' : 'neutral'))
                            : null;
                        const overrideColor = deltaMode
                            ? (trend === 'positive' ? colorSuccess : (trend === 'negative' ? colorError : colorNeutral))
                            : null;
                        const palette = computeVisualPalette(el, intensidadRelativa || 0, overrideColor);
                        const baseColor = el.dataset.baseColor || palette.base || palette.swatch || overrideColor || inactiveFill;
                        el.classList.add('active');
                        el.classList.remove('inactive');
                        if (deltaMode) {
                            el.classList.add('has-delta-trend');
                            el.dataset.trend = trend;
                            const strokeStyles = {};
                            if (trend === 'positive') {
                                strokeStyles.stroke = colorSuccess;
                                strokeStyles.strokeWidth = '3';
                                strokeStyles.strokeDasharray = '';
                                strokeStyles.strokeOpacity = '0.85';
                            } else if (trend === 'negative') {
                                strokeStyles.stroke = colorError;
                                strokeStyles.strokeWidth = '3';
                                strokeStyles.strokeDasharray = '10 6';
                                strokeStyles.strokeOpacity = '0.9';
                            } else {
                                strokeStyles.stroke = colorNeutral;
                                strokeStyles.strokeWidth = '2.5';
                                strokeStyles.strokeDasharray = '6 6';
                                strokeStyles.strokeOpacity = '0.75';
                            }
                            applyStylesToGroup(el, {
                                fill: palette.fill,
                                ...strokeStyles
                            });
                        } else {
                            el.classList.remove('has-delta-trend');
                            delete el.dataset.trend;
                            applyStylesToGroup(el, {
                                fill: baseColor,
                                stroke: '',
                                strokeWidth: '',
                                strokeDasharray: '',
                                strokeOpacity: ''
                            });
                            restoreStrokeAttributes(el);
                        }
                        const opacityValue = deltaMode
                            ? Math.min(1, 0.72 + intensidadRelativa * 0.28)
                            : Math.min(0.95, 0.38 + intensidadRelativa * 0.5);
                        el.style.opacity = opacityValue.toFixed(2);
                        if (deltaMode) {
                            el.style.filter = `drop-shadow(0 0 ${glowRadius}px ${palette.glow}) saturate(${(1.18 + intensidadRelativa * 0.35).toFixed(2)}) brightness(${(1 + intensidadRelativa * 0.2).toFixed(2)})`;
                        } else {
                            el.style.filter = `drop-shadow(0 0 ${glowRadius}px ${palette.glow}) saturate(${(1 + intensidadRelativa * 0.4).toFixed(2)}) brightness(${(0.95 + intensidadRelativa * 0.18).toFixed(2)})`;
                        }
                        const formattedValue = deltaMode
                            ? `${numericValue > 0 ? '+' : (numericValue < 0 ? '−' : '')}${Math.round(Math.abs(numericValue))}`
                            : Math.round(numericValue);
                        el.dataset.porcentaje = formattedValue;
                        el.dataset.color = deltaMode ? palette.fill : baseColor;
                    });
                });
            }

            const tieneDatos = valores.some(value => (deltaMode ? Math.abs(value) : value) > 0);
            updateSummary(periodKey, dataset);
            updateLegend(porcentajes, dataset);

            if (emptyState) {
                if (tieneDatos) {
                    emptyState.setAttribute('hidden', 'hidden');
                } else {
                    emptyState.removeAttribute('hidden');
                }
            }
        }

        function syncFilterButtons() {
            const keys = Object.keys(progresoDataset);
            filterButtons.forEach(button => {
                const periodKey = button.dataset.period;
                const disponible = periodKey && keys.includes(periodKey);
                button.disabled = !disponible;
                button.classList.toggle('is-disabled', !disponible);
                if (!disponible) {
                    button.classList.remove('active');
                }
            });
            return keys;
        }

        function determineDefaultPeriod(keys) {
            if (explicitDefaultPeriod && keys.includes(explicitDefaultPeriod)) {
                return explicitDefaultPeriod;
            }
            if (keys.includes('weekly')) {
                return 'weekly';
            }
            if (keys.includes('monthly')) {
                return 'monthly';
            }
            if (keys.includes('daily')) {
                return 'daily';
            }
            return keys[0] || null;
        }

        function applyPeriodAndActivate(periodKey) {
            if (!periodKey || !(periodKey in progresoDataset)) {
                filterButtons.forEach(btn => btn.classList.remove('active'));
                aplicarProgresoVisual(periodKey);
                currentPeriod = null;
                viewerContainer.dataset.activePeriod = '';
                return;
            }
            filterButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.period === periodKey));
            aplicarProgresoVisual(periodKey);
            currentPeriod = periodKey;
            viewerContainer.dataset.activePeriod = periodKey;
        }

        function prepareBodyParts() {
            bodyParts.forEach(part => {
                const baseColor = resolveBaseColor(part);
                if (baseColor) {
                    part.dataset.baseColor = baseColor;
                }
                captureBaseStrokeAttributes(part);
                part.querySelectorAll(shapeSelector).forEach(shape => {
                    captureBaseStrokeAttributes(shape);
                    if (!shape.dataset.baseColor) {
                        const shapeColor = shape.getAttribute('fill') || extractInlineFill(shape.getAttribute('style'));
                        if (shapeColor) {
                            shape.dataset.baseColor = shapeColor;
                        }
                    }
                });
                restoreStrokeAttributes(part);
            });
        }

        prepareBodyParts();

        function handlePointerOver(event) {
            const targetPart = event.target.closest('.body-part');
            if (!targetPart || !viewerContainer.contains(targetPart)) {
                return;
            }
            showTooltip(targetPart, event);
        }

        function handlePointerMove(event) {
            if (!tooltipVisible) {
                return;
            }
            const targetPart = event.target.closest('.body-part');
            const part = targetPart || activeTooltipPart;
            if (!part || !viewerContainer.contains(part)) {
                hideTooltip();
                return;
            }
            updateTooltip(part, event);
        }

        function handlePointerOut(event) {
            if (!tooltipVisible) {
                return;
            }
            const currentPart = event.target.closest('.body-part');
            if (!currentPart) {
                hideTooltip();
                return;
            }
            const relatedElement = event.relatedTarget;
            if (relatedElement && currentPart.contains(relatedElement)) {
                return;
            }
            const nextPart = relatedElement ? relatedElement.closest('.body-part') : null;
            if (nextPart && viewerContainer.contains(nextPart)) {
                return;
            }
            hideTooltip();
        }

        viewerContainer.addEventListener('pointerover', handlePointerOver);
        viewerContainer.addEventListener('pointermove', handlePointerMove);
        viewerContainer.addEventListener('pointerout', handlePointerOut);

        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                if (button.disabled) {
                    return;
                }
                applyPeriodAndActivate(button.dataset.period);
            });
        });

        const initialKeys = syncFilterButtons();
        const initialPeriod = determineDefaultPeriod(initialKeys);
        if (initialPeriod) {
            applyPeriodAndActivate(initialPeriod);
        } else {
            resetBodyParts();
            updateSummary(null, {});
            updateLegend({}, {});
            if (emptyState) {
                emptyState.removeAttribute('hidden');
            }
        }

        window.bodyViewer = {
            setDataset(dataset, options = {}) {
                const merge = Boolean(options.merge);
                if (merge) {
                    progresoDataset = { ...progresoDataset, ...(dataset || {}) };
                } else {
                    progresoDataset = dataset ? { ...dataset } : {};
                }
                window.progresoData = progresoDataset;
                if (options.defaultPeriod !== undefined) {
                    explicitDefaultPeriod = options.defaultPeriod;
                } else if (!merge) {
                    explicitDefaultPeriod = viewerContainer.dataset.defaultPeriod || null;
                }
                const keys = syncFilterButtons();
                const nextPeriod = determineDefaultPeriod(keys);
                applyPeriodAndActivate(nextPeriod);
            },
            applyPeriod(periodKey) {
                applyPeriodAndActivate(periodKey);
            },
            getDataset() {
                return { ...progresoDataset };
            },
            getAvailablePeriods() {
                return Object.keys(progresoDataset);
            },
            getCurrentPeriod() {
                return currentPeriod;
            }
        };
    });
</script>